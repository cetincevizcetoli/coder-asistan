{"files": ["ARCHITECTURE.md", "metadata.json", "readme.md", "proje_dokumu.md", "secret_logic.py"], "corpus": ["# \ud83c\udfd7\ufe0f Coder-Asistan: Teknik Mimari ve Geli\u015ftirici K\u0131lavuzu\n\nBu belge, **Coder-Asistan** projesinin i\u00e7 yap\u0131s\u0131n\u0131, veri ak\u0131\u015f\u0131n\u0131, tasar\u0131m kararlar\u0131n\u0131 ve sistemin \"neden\" b\u00f6yle \u00e7al\u0131\u015ft\u0131\u011f\u0131n\u0131 anlatan teknik referanst\u0131r.\n\nProje, basit bir script de\u011fil; mod\u00fcler, RAG (Retrieval-Augmented Generation) tabanl\u0131 ve durum (state) korumal\u0131 bir **CLI Kodlama St\u00fcdyosu**dur.\n\n---\n\n## 1. \ud83d\uddfa\ufe0f Ku\u015f Bak\u0131\u015f\u0131 Sistem Mimarisi\n\nSistem 4 ana katmandan olu\u015fur:\n\n1.  **Y\u00f6netim Katman\u0131 (Launcher):** Kullan\u0131c\u0131y\u0131 kar\u015f\u0131lar, proje izolasyonunu sa\u011flar ve \u00e7al\u0131\u015fma dizinini ayarlar.\n2.  **Beyin Katman\u0131 (Assistant & Config):** Kullan\u0131c\u0131 iste\u011fini i\u015fler, maliyeti hesaplar ve AI'ya \"JSON format\u0131nda\" emir verir.\n3.  **Haf\u0131za Katman\u0131 (RAG Core):** Projedeki kodlar\u0131 vekt\u00f6rle\u015ftirir (Embedding) ve anlamsal arama yapar.\n4.  **Adapt\u00f6r Katman\u0131 (Model Core):** Farkl\u0131 AI sa\u011flay\u0131c\u0131lar\u0131n\u0131 (Gemini, Groq, HF) tek bir standart aray\u00fcze d\u00f6n\u00fc\u015ft\u00fcr\u00fcr.\n\n\n```text\n      [ KULLANICI ]\n           \u2502\n           \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502   LAUNCHER.PY   \u2502  (1. Giri\u015f Kap\u0131s\u0131 & Proje Se\u00e7imi)\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  ASSISTANT.PY   \u2502 \u25c4\u2500\u2500\u2500\u25ba \u2502  CONFIG (Kurallar)\u2502\n  \u2502 (Karar Motoru)  \u2502       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u251c\u2500\u2500\u2500\u25ba [ \ud83e\udde0 HAFIZA (RAG) ] \u25c4\u2500\u2500\u2500 (.coder_memory)\n           \u2502      (Kodlar\u0131 Hat\u0131rlar)\n           \u2502\n           \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502   MODEL CORE    \u2502  (Adapt\u00f6r Katman\u0131)\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u251c\u2500\u2500\u2500\u25ba Google Gemini\n           \u251c\u2500\u2500\u2500\u25ba Groq Llama 3\n           \u2514\u2500\u2500\u2500\u25ba DeepSeek / HF\n\n---\n\n## 2. \ud83d\udcc2 Dizin Yap\u0131s\u0131 ve Sorumluluklar\n\n```text\ncoder-asistan/\n\u251c\u2500\u2500 launcher.py           # [ENTRY POINT] Proje se\u00e7imi ve ortam haz\u0131rl\u0131\u011f\u0131\n\u251c\u2500\u2500 assistant.py          # [MAIN LOOP] \u0130stek-Cevap d\u00f6ng\u00fcs\u00fc ve dosya i\u015flemleri\n\u251c\u2500\u2500 config.py             # [SETTINGS] Sabitler, Promptlar ve Fiyatland\u0131rma\n\u251c\u2500\u2500 requirements.txt      # Ba\u011f\u0131ml\u0131l\u0131klar\n\u2502\n\u251c\u2500\u2500 my_projects/          # [USER DATA] Kullan\u0131c\u0131 projelerinin fiziksel konumu\n\u2502   \u2514\u2500\u2500 proje_x/          # -> \u0130zole \u00c7al\u0131\u015fma Alan\u0131\n\u2502       \u251c\u2500\u2500 .coder_memory/ # -> ChromaDB (Vekt\u00f6r Veritaban\u0131)\n\u2502       \u251c\u2500\u2500 .chat_history/ # -> Loglar\n\u2502       \u2514\u2500\u2500 src/           # -> Kullan\u0131c\u0131 Kodlar\u0131\n\u2502\n\u251c\u2500\u2500 core/                 # [BACKEND] Sistem \u00e7ekirde\u011fi\n\u2502   \u251c\u2500\u2500 base.py           # -> Soyut Model S\u0131n\u0131f\u0131 (Interface)\n\u2502   \u251c\u2500\u2500 memory.py         # -> RAG Motoru (SentenceTransformers + ChromaDB)\n\u2502   \u251c\u2500\u2500 gemini.py         # -> Google Adapter\n\u2502   \u2514\u2500\u2500 groq.py           # -> Groq Adapter\n\u2502\n\u2514\u2500\u2500 utils/ (Opsiyonel)    # Yard\u0131mc\u0131 ara\u00e7lar (debug.py, system_audit.py vb.)\n```\n\n---\n\n## 3. \u2699\ufe0f Veri Ak\u0131\u015f\u0131 (Bir Komutun Yolculu\u011fu)\n\nKullan\u0131c\u0131 `python launcher.py` \u00e7al\u0131\u015ft\u0131r\u0131p bir projeye girdi\u011finde ve \"Hatay\u0131 d\u00fczelt\" dedi\u011finde arka planda \u015fu olaylar zinciri ger\u00e7ekle\u015fir:\n\n### Ad\u0131m 1: Ba\u011flam\u0131n Y\u00fcklenmesi (Context Loading)\n* `assistant.py`, `core.memory.MemoryManager`'\u0131 ba\u015flat\u0131r.\n* Kullan\u0131c\u0131n\u0131n sorusu (\"Hatay\u0131 d\u00fczelt\"), `SentenceTransformer` modeli ile **vekt\u00f6re** (say\u0131sal diziye) \u00e7evrilir.\n* ChromaDB i\u00e7inde bu vekt\u00f6re matematiksel olarak en yak\u0131n olan kod par\u00e7alar\u0131 (Chunks) bulunur.\n\n### Ad\u0131m 2: Prompt M\u00fchendisli\u011fi (Prompt Engineering)\nAI'ya giden metin \u015fu \u015fablonda birle\u015ftirilir:\n1.  **Sistem Emri (`config.SYSTEM_INSTRUCTION`):** \"Sen bir JSON makinesisin. Asla sohbet etme.\"\n2.  **RAG Ba\u011flam\u0131:** \"Veritaban\u0131ndan buldu\u011fum ilgili kodlar \u015funlar: ...\"\n3.  **Kullan\u0131c\u0131 \u0130ste\u011fi:** \"Hatay\u0131 d\u00fczelt.\"\n\n### Ad\u0131m 3: Model \u00c7a\u011fr\u0131s\u0131 ve Adaptasyon\n* Se\u00e7ili model (\u00d6rn: Gemini), `core/gemini.py` \u00fczerinden \u00e7a\u011fr\u0131l\u0131r.\n* Her model farkl\u0131 yan\u0131t verse de (Object, Dict, Text), adapt\u00f6rler bunu standart bir formata \u00e7evirir.\n\n### Ad\u0131m 4: JSON Temizli\u011fi ve G\u00fcvenlik\n* AI'dan gelen yan\u0131t `clean_json_string()` fonksiyonuna girer. Markdown etiketleri (` ```json `) temizlenir.\n* Saf JSON parse edilir.\n* **G\u00fcvenlik:** AI \"Bilgisayar\u0131 kapat\" diyemez. Sadece `dosya_olustur` veya `dosya_sil` komutlar\u0131 i\u015flenir.\n\n### Ad\u0131m 5: \u0130\u015flem ve Yedekleme\n* Dosya yaz\u0131lmadan \u00f6nce `backup_file()` fonksiyonu devreye girer.\n* Hedef dosyan\u0131n bir kopyas\u0131 `.gassist_backups` klas\u00f6r\u00fcne zaman damgas\u0131yla (timestamp) kaydedilir.\n* Yeni i\u00e7erik yaz\u0131l\u0131r.\n\n---\n\n## 4. \ud83d\udd27 Kritik Konfig\u00fcrasyonlar (`config.py`)\n\nGeli\u015ftiricilerin bilmesi gereken hassas ayarlar:\n\n* **`SYSTEM_INSTRUCTION`:** Sistemsel prompt. AI'n\u0131n \"Suskun\" olmas\u0131n\u0131 sa\u011flayan yer buras\u0131d\u0131r. Buradaki kurallar gev\u015fetilirse sistemin JSON parse yetene\u011fi bozulabilir.\n* **`MAX_FILE_SIZE`:** Varsay\u0131lan 5MB. AI'n\u0131n token limitini patlatmamas\u0131 i\u00e7in b\u00fcy\u00fck dosyalar (loglar, binaryler) okunmaz.\n* **`PRICING_RATES`:** Maliyet hesaplama tablosu. Statiktir, API fiyatlar\u0131 de\u011fi\u015firse manuel g\u00fcncellenmelidir.\n\n---\n\n## 5. \ud83d\udee0\ufe0f Geli\u015ftirici Ara\u00e7 Seti (DevTools)\n\nProjeyi debug etmek veya y\u00f6netmek i\u00e7in kullan\u0131lan \"\u0130svi\u00e7re \u00c7ak\u0131s\u0131\" ara\u00e7lar\u0131:\n\n| Ara\u00e7 | Dosya | G\u00f6revi |\n| :--- | :--- | :--- |\n| **Haf\u0131za M\u00fcfetti\u015fi** | `debug.py` | ChromaDB veritaban\u0131na ba\u011flan\u0131r, vekt\u00f6rleri ve kay\u0131tl\u0131 kod par\u00e7alar\u0131n\u0131 ham haliyle g\u00f6sterir. |\n| **Sistem Doktoru** | `system_audit.py` | Dosya izinlerini, log boyutlar\u0131n\u0131 ve veritaban\u0131 b\u00fct\u00fcnl\u00fc\u011f\u00fcn\u00fc (integrity) kontrol eder. |\n| **Proje Ta\u015f\u0131y\u0131c\u0131** | `migrate_projects.py` | `my_projects` d\u0131\u015f\u0131ndaki \"sahipsiz\" projeleri bulup i\u00e7eriye ta\u015f\u0131r. |\n| **Belgeleyici** | `generate_docs.py` | T\u00fcm kod yap\u0131s\u0131n\u0131 tek bir Markdown dosyas\u0131na d\u00f6ker (LLM analizi i\u00e7in). |\n\n---\n\n## 6. \ud83d\ude80 Gelecek Planlar\u0131 ve Geni\u015fletilebilirlik\n\nBu mimari \u015funlara izin verecek \u015fekilde tasarlanm\u0131\u015ft\u0131r:\n* **Yeni Model Ekleme:** Sadece `core/` alt\u0131na yeni bir `.py` dosyas\u0131 ekleyerek.\n* **Resim Deste\u011fi:** `assistant.py` g\u00fcncellenerek Gemini 1.5 Pro'nun Vision \u00f6zellikleri a\u00e7\u0131labilir.\n* **Web Aray\u00fcz\u00fc:** Logic (Mant\u0131k) ve UI (Aray\u00fcz) ayr\u0131ld\u0131\u011f\u0131 i\u00e7in, `launcher.py` yerine bir `app.py` (Flask/Streamlit) yaz\u0131larak kolayca web'e ta\u015f\u0131nabilir.\n\n---\n**Geli\u015ftirici:** Ahmet \u00c7etin\n*Bu dok\u00fcman Coder-Asistan v2.0 mimarisini yans\u0131t\u0131r.*", "{\n    \"created_at\": \"2025-12-17 23:43:38.641692\",\n    \"embedding_model\": \"paraphrase-multilingual-MiniLM-L12-v2\",\n    \"total_cost\": 0.0,\n    \"last_interaction\": \"2025-12-17 23:43:38.641733\"\n}", "# \ud83d\ude80 Coder-Asistan\n### Haf\u0131zal\u0131, G\u00fcvenli ve Proje Odakl\u0131 AI Kodlama St\u00fcdyosu\n\n![Python](https://img.shields.io/badge/python-3.10%2B-blue)\n![License](https://img.shields.io/badge/license-MIT-green)\n![Status](https://img.shields.io/badge/status-active-success)\n\n**Coder-Asistan**, klasik \"soru sor \u2013 cevap al\" botlar\u0131ndan farkl\u0131 olarak, projelerinizi y\u00f6neten, ba\u011flam\u0131 hat\u0131rlayan ve kodu **kontroll\u00fc \u015fekilde** de\u011fi\u015ftiren **terminal tabanl\u0131 bir AI geli\u015ftirme ortam\u0131d\u0131r.**\n\nHer proje i\u00e7in ayr\u0131 bir haf\u0131za olu\u015fturur (RAG). Bir projede \u00f6\u011frendi\u011fini di\u011ferine ta\u015f\u0131maz. Ne yapt\u0131\u011f\u0131n\u0131 \u00f6nce planlar, sonra siz onaylarsan\u0131z uygular.\n\n> **K\u0131saca:** Bu bir bot de\u011fil, **AI destekli bir geli\u015ftirme \u00e7al\u0131\u015fma alan\u0131**.\n\n---\n\n## \ud83c\udfaf Temel \u00d6zellikler\n\n* **\ud83c\udfed Proje Fabrikas\u0131 (`launcher.py`):** T\u00fcm projeleri tek merkezden y\u00f6netin.\n* **\ud83e\udde0 \u0130zole Haf\u0131za:** Her projenin kendi `.coder_memory` klas\u00f6r\u00fc vard\u0131r. AI, projenizdeki dosyalar\u0131 okur ve hat\u0131rlar.\n* **\ud83d\udee1\ufe0f G\u00fcvenli Mod:** Kodlar\u0131 do\u011frudan yazmaz; \u00f6nce plan sunar, onaylarsan\u0131z i\u015fler.\n* **\ud83d\udcb0 Maliyet Takibi:** Token ba\u015f\u0131na harcamay\u0131 kuru\u015fu kuru\u015funa raporlar.\n* **\ud83d\udd0c Model \u00d6zg\u00fcrl\u00fc\u011f\u00fc:** Google Gemini, Llama 3 (Groq), DeepSeek veya Hugging Face.\n\n---\n\n## \ud83d\udce6 Kurulum (2 Dakikada Haz\u0131r)\n\n### 1\ufe0f\u20e3 Projeyi \u0130ndirin\n```bash\ngit clone [https://github.com/cetincevizcetoli/coder-asistan.git](https://github.com/cetincevizcetoli/coder-asistan.git)\ncd coder-asistan\n```\n\n### 2\ufe0f\u20e3 Sanal Ortam Olu\u015fturun (\u00d6NEML\u0130)\n\n**\ud83e\ude9f Windows:**\n```cmd\npython -m venv venv\nvenv\\Scripts\\activate\n```\n\n**\ud83d\udc27 Linux / macOS:**\n```bash\npython3 -m venv venv\nsource venv/bin/activate\n```\n*(Terminal sat\u0131r\u0131n\u0131n ba\u015f\u0131nda `(venv)` yaz\u0131s\u0131n\u0131 g\u00f6rmelisiniz.)*\n\n### 3\ufe0f\u20e3 Paketleri Y\u00fckleyin\n```bash\npip install -r requirements.txt\n```\n\n---\n\n## \ud83d\udd11 API Anahtar\u0131 Ayarlar\u0131\n\nCoder-Asistan bir beyne ihtiya\u00e7 duyar. **Google Gemini (\u00dccretsiz)** \u00f6nerilir.\n\n1. [Google AI Studio](https://aistudio.google.com/app/apikey) adresinden Key al\u0131n.\n2. Bilgisayar\u0131n\u0131za kaydedin:\n\n**\ud83e\ude9f Windows (Kal\u0131c\u0131):**\n```cmd\nsetx GOOGLE_API_KEY \"API_KEY_BURAYA_YAPISTIR\"\n```\n*(Komuttan sonra terminali kapat\u0131p yeniden a\u00e7\u0131n!)*\n\n**\ud83d\udc27 Linux / macOS:**\n```bash\necho 'export GOOGLE_API_KEY=\"API_KEY_BURAYA\"' >> ~/.bashrc\nsource ~/.bashrc\n```\n\n---\n\n## \u25b6\ufe0f Nas\u0131l Kullan\u0131l\u0131r? (Ana Kumanda)\n\nT\u00fcm sistemi y\u00f6netmek i\u00e7in tek bir komut yeterlidir:\n\n```bash\npython launcher.py\n```\n\nKar\u015f\u0131n\u0131za gelen men\u00fcden:\n* **[N]** ile yeni proje olu\u015fturabilir,\n* **[1-9]** ile mevcut projelerinize girip AI ile \u00e7al\u0131\u015fmaya ba\u015flayabilirsiniz.\n* **[E]** ile projelerinizi ZIP olarak yedekleyebilirsiniz.\n\n---\n\n## \ud83d\udee0\ufe0f \u0130svi\u00e7re \u00c7ak\u0131s\u0131: Yard\u0131mc\u0131 Ara\u00e7lar\n\nBu projede sadece kod yazan bir asistan yok, i\u015finizi kolayla\u015ft\u0131racak bir dizi **profesyonel ara\u00e7** bulunur. \u0130\u015fte alet \u00e7antan\u0131z:\n\n### 1. \ud83d\udd75\ufe0f\u200d\u2642\ufe0f Haf\u0131za M\u00fcfetti\u015fi (`debug.py`)\nAI'n\u0131n projeniz hakk\u0131nda ne bildi\u011fini merak m\u0131 ediyorsunuz? Vekt\u00f6r veritaban\u0131n\u0131n i\u00e7ine girip kaydedilen kod par\u00e7alar\u0131n\u0131 okuman\u0131z\u0131 sa\u011flar.\n```bash\npython debug.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** AI, kodunuzu hat\u0131rlam\u0131yorsa veya yanl\u0131\u015f cevap veriyorsa haf\u0131zay\u0131 kontrol etmek i\u00e7in.\n\n### 2. \ud83d\ude9a Proje Nakliyecisi (`migrate_projects.py`)\nEski s\u00fcr\u00fcmden kalma veya yanl\u0131\u015fl\u0131kla ana dizine kopyalad\u0131\u011f\u0131n\u0131z projeleri bulur ve otomatik olarak yeni sisteme (`my_projects` klas\u00f6r\u00fcne) ta\u015f\u0131r.\n```bash\npython migrate_projects.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** Klas\u00f6rde projeniz var ama Launcher listesinde g\u00f6r\u00fcnm\u00fcyorsa.\n\n### 3. \ud83e\ude7a Sistem Doktoru (`system_audit.py`)\nProjelerinizin sa\u011fl\u0131k kontrol\u00fcn\u00fc yapar. Log dosyalar\u0131 dolu mu? Veritaban\u0131 b\u00fct\u00fcnl\u00fc\u011f\u00fc (integrity) sa\u011flam m\u0131? Hepsini raporlar.\n```bash\npython system_audit.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** Sistemsel bir hatadan \u015f\u00fcpheleniyorsan\u0131z veya veritaban\u0131 bozulduysa.\n\n### 4. \ud83d\udcdd Proje Katibi (`generate_docs.py`)\nT\u00fcm projenizin kodlar\u0131n\u0131 okur ve tek bir Markdown dosyas\u0131nda (`proje_dokumu.md`) birle\u015ftirir.\n```bash\npython generate_docs.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** Projenin tamam\u0131n\u0131 ChatGPT/Claude gibi ba\u015fka bir AI'ya at\u0131p \"Bunu analiz et\" demek istedi\u011finizde.\n\n### 5. \ud83d\udce1 Model Kontrolc\u00fcs\u00fc (`check_models.py`)\nGoogle hesab\u0131n\u0131zda tan\u0131ml\u0131 ve eri\u015filebilir olan Gemini modellerini listeler.\n```bash\npython check_models.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** \"Hangi modelleri kullanabilirim?\" diye merak etti\u011finizde.\n\n---\n\n## \ud83e\uddea Geli\u015fmi\u015f Parametreler\n\nProjeye girdikten sonra (veya `assistant.py`'yi manuel kullan\u0131rken) \u015fu modlar\u0131 kullanabilirsiniz:\n\n* **`--dry-run` (Prova Modu):**\n  AI kodlar\u0131 yazar, plan\u0131 g\u00f6sterir ama **dosyaya kaydetmez.**\n  ```bash\n  python assistant.py \"Ana sayfay\u0131 de\u011fi\u015ftir\" --dry-run\n  ```\n\n* **`--verbose` (Geveze Mod):**\n  Arka planda d\u00f6nen ham JSON verisini ve d\u00fc\u015f\u00fcnce s\u00fcrecini g\u00f6sterir. Hata ay\u0131klamak i\u00e7in idealdir.\n  ```bash\n  python assistant.py \"Hata bul\" --verbose\n  ```\n\n---\n\n## \ud83c\udfd7\ufe0f Proje Mimarisi\n\n```text\ncoder-asistan/\n\u251c\u2500 launcher.py          # \ud83c\udfae ANA KUMANDA (Ba\u015flat\u0131c\u0131)\n\u251c\u2500 assistant.py         # \ud83e\udde0 \u0130\u015flem Motoru\n\u251c\u2500 my_projects/         # \ud83d\udcc2 PROJE FABR\u0130KASI\n\u2502  \u2514\u2500 odev-1/           # \ud83d\udd12 \u0130zole Proje Alan\u0131\n\u2502     \u251c\u2500 .coder_memory/ # \ud83e\udde0 Projeye \u00f6zel haf\u0131za\n\u2502     \u2514\u2500 src/           # Kodlar\u0131n\u0131z\n\u251c\u2500 debug.py             # \ud83d\udd75\ufe0f\u200d\u2642\ufe0f Haf\u0131za M\u00fcfetti\u015fi\n\u251c\u2500 system_audit.py      # \ud83e\ude7a Sistem Doktoru\n\u251c\u2500 migrate_projects.py  # \ud83d\ude9a Ta\u015f\u0131y\u0131c\u0131\n\u2514\u2500 requirements.txt\n```\n\n---\n\n## \ud83d\udca1 \u0130pu\u00e7lar\u0131 ve P\u00fcf Noktalar\u0131\n\n* **\ud83d\uddd1\ufe0f Proje Silme:** Bir projeyi silmek i\u00e7in Launcher'da bir komut yoktur. `my_projects` klas\u00f6r\u00fcne gidip ilgili proje klas\u00f6r\u00fcn\u00fc **elle silmeniz** yeterlidir.\n* **\ud83e\udde0 Haf\u0131za S\u0131f\u0131rlama:** AI eski kodlar\u0131 hat\u0131rlamakta \u0131srar ediyorsa veya kafas\u0131 kar\u0131\u015ft\u0131ysa; proje klas\u00f6r\u00fcn\u00fczdeki `.coder_memory` klas\u00f6r\u00fcn\u00fc silin. Coder-Asistan bir sonraki a\u00e7\u0131l\u0131\u015fta dosyalar\u0131 taray\u0131p haf\u0131zay\u0131 s\u0131f\u0131rdan kuracakt\u0131r.\n* **\u2699\ufe0f \u0130nce Ayarlar:** Dosya boyutu s\u0131n\u0131rlar\u0131n\u0131 veya maliyet hesaplama y\u00f6ntemini de\u011fi\u015ftirmek isterseniz `config.py` dosyas\u0131n\u0131 d\u00fczenleyebilirsiniz.\n\n---\n## \ud83e\udd1d Katk\u0131da Bulunma\n\nPull request'ler kabul edilir! B\u00fcy\u00fck de\u011fi\u015fiklikler i\u00e7in \u00f6nce bir Issue a\u00e7arak tart\u0131\u015fal\u0131m.\n\n> \ud83c\udfd7\ufe0f **Geli\u015ftirici Notu:** Bu projenin i\u00e7 yap\u0131s\u0131n\u0131, veri ak\u0131\u015f\u0131n\u0131 ve teknik detaylar\u0131n\u0131 derinlemesine incelemek i\u00e7in l\u00fctfen **[M\u0130MAR\u0130 VE TEKN\u0130K KILAVUZ (ARCHITECTURE.md)](ARCHITECTURE.md)** dosyas\u0131n\u0131 okuyunuz.\n---\n## \ud83d\udc64 Geli\u015ftirici\n\n**Ahmet \u00c7etin**\n* **GitHub:** [github.com/cetincevizcetoli](https://github.com/cetincevizcetoli)\n* **Web:** [yapanzeka.acetin.com.tr](https://yapanzeka.acetin.com.tr)\n\n> *\"Karma\u015f\u0131k kodlar\u0131, kontroll\u00fc ara\u00e7larla y\u00f6netin.\"*", "# \ud83d\udcdd Proje D\u00f6k\u00fcm\u00fc: coder-asistan\n\nBu d\u00f6k\u00fcm, **/home/ahmetc/proje/coder-asistan** dizini i\u00e7in olu\u015fturulmu\u015ftur.\nNot: `my_projects` klas\u00f6r\u00fcn\u00fcn i\u00e7eri\u011fi gizlilik gere\u011fi hari\u00e7 tutulmu\u015ftur.\n\n### \ud83d\udcc2 Proje Dizin Yap\u0131s\u0131 ve Dosyalar\n\n- **coder-asistan/** (Proje K\u00f6k\u00fc)\n  - .gitignore\n  - ARCHITECTURE.md\n  - assistant.py\n  - check_models.py\n  - config.py\n  - debug.py\n  - generate_docs.py\n  - launcher.py\n  - migrate_projects.py\n  - model_selector.py\n  - proje_dokumu.md\n  - readme.md\n  - requirements.txt\n  - settings_menu.py\n  - system_audit.py\n  - user_settings.json\n  - **temp_install_dir/**\n  - **core/**\n    - base.py\n    - deepseek.py\n    - gemini.py\n    - groq.py\n    - huggingface.py\n    - memory.py\n    - orchestrator.py\n  - **my_projects/** (Kullan\u0131c\u0131 Projeleri - \u0130\u00e7erik Gizli)\n\n---\n### \ud83d\udcbb Kod \u0130\u00e7eri\u011fi D\u00f6k\u00fcm\u00fc\n\n\n#### \ud83d\udcc4 Dosya: `ARCHITECTURE.md`\n\n```md\n# \ud83c\udfd7\ufe0f Coder-Asistan: Teknik Mimari ve Geli\u015ftirici K\u0131lavuzu\n\nBu belge, **Coder-Asistan** projesinin i\u00e7 yap\u0131s\u0131n\u0131, veri ak\u0131\u015f\u0131n\u0131, tasar\u0131m kararlar\u0131n\u0131 ve sistemin \"neden\" b\u00f6yle \u00e7al\u0131\u015ft\u0131\u011f\u0131n\u0131 anlatan teknik referanst\u0131r.\n\nProje, basit bir script de\u011fil; mod\u00fcler, RAG (Retrieval-Augmented Generation) tabanl\u0131 ve durum (state) korumal\u0131 bir **CLI Kodlama St\u00fcdyosu**dur.\n\n---\n\n## 1. \ud83d\uddfa\ufe0f Ku\u015f Bak\u0131\u015f\u0131 Sistem Mimarisi\n\nSistem 4 ana katmandan olu\u015fur:\n\n1.  **Y\u00f6netim Katman\u0131 (Launcher):** Kullan\u0131c\u0131y\u0131 kar\u015f\u0131lar, proje izolasyonunu sa\u011flar ve \u00e7al\u0131\u015fma dizinini ayarlar.\n2.  **Beyin Katman\u0131 (Assistant & Config):** Kullan\u0131c\u0131 iste\u011fini i\u015fler, maliyeti hesaplar ve AI'ya \"JSON format\u0131nda\" emir verir.\n3.  **Haf\u0131za Katman\u0131 (RAG Core):** Projedeki kodlar\u0131 vekt\u00f6rle\u015ftirir (Embedding) ve anlamsal arama yapar.\n4.  **Adapt\u00f6r Katman\u0131 (Model Core):** Farkl\u0131 AI sa\u011flay\u0131c\u0131lar\u0131n\u0131 (Gemini, Groq, HF) tek bir standart aray\u00fcze d\u00f6n\u00fc\u015ft\u00fcr\u00fcr.\n\n\n```text\n      [ KULLANICI ]\n           \u2502\n           \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502   LAUNCHER.PY   \u2502  (1. Giri\u015f Kap\u0131s\u0131 & Proje Se\u00e7imi)\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  ASSISTANT.PY   \u2502 \u25c4\u2500\u2500\u2500\u25ba \u2502  CONFIG (Kurallar)\u2502\n  \u2502 (Karar Motoru)  \u2502       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u251c\u2500\u2500\u2500\u25ba [ \ud83e\udde0 HAFIZA (RAG) ] \u25c4\u2500\u2500\u2500 (.coder_memory)\n           \u2502      (Kodlar\u0131 Hat\u0131rlar)\n           \u2502\n           \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502   MODEL CORE    \u2502  (Adapt\u00f6r Katman\u0131)\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u251c\u2500\u2500\u2500\u25ba Google Gemini\n           \u251c\u2500\u2500\u2500\u25ba Groq Llama 3\n           \u2514\u2500\u2500\u2500\u25ba DeepSeek / HF\n\n---\n\n## 2. \ud83d\udcc2 Dizin Yap\u0131s\u0131 ve Sorumluluklar\n\n```text\ncoder-asistan/\n\u251c\u2500\u2500 launcher.py           # [ENTRY POINT] Proje se\u00e7imi ve ortam haz\u0131rl\u0131\u011f\u0131\n\u251c\u2500\u2500 assistant.py          # [MAIN LOOP] \u0130stek-Cevap d\u00f6ng\u00fcs\u00fc ve dosya i\u015flemleri\n\u251c\u2500\u2500 config.py             # [SETTINGS] Sabitler, Promptlar ve Fiyatland\u0131rma\n\u251c\u2500\u2500 requirements.txt      # Ba\u011f\u0131ml\u0131l\u0131klar\n\u2502\n\u251c\u2500\u2500 my_projects/          # [USER DATA] Kullan\u0131c\u0131 projelerinin fiziksel konumu\n\u2502   \u2514\u2500\u2500 proje_x/          # -> \u0130zole \u00c7al\u0131\u015fma Alan\u0131\n\u2502       \u251c\u2500\u2500 .coder_memory/ # -> ChromaDB (Vekt\u00f6r Veritaban\u0131)\n\u2502       \u251c\u2500\u2500 .chat_history/ # -> Loglar\n\u2502       \u2514\u2500\u2500 src/           # -> Kullan\u0131c\u0131 Kodlar\u0131\n\u2502\n\u251c\u2500\u2500 core/                 # [BACKEND] Sistem \u00e7ekirde\u011fi\n\u2502   \u251c\u2500\u2500 base.py           # -> Soyut Model S\u0131n\u0131f\u0131 (Interface)\n\u2502   \u251c\u2500\u2500 memory.py         # -> RAG Motoru (SentenceTransformers + ChromaDB)\n\u2502   \u251c\u2500\u2500 gemini.py         # -> Google Adapter\n\u2502   \u2514\u2500\u2500 groq.py           # -> Groq Adapter\n\u2502\n\u2514\u2500\u2500 utils/ (Opsiyonel)    # Yard\u0131mc\u0131 ara\u00e7lar (debug.py, system_audit.py vb.)\n```\n\n---\n\n## 3. \u2699\ufe0f Veri Ak\u0131\u015f\u0131 (Bir Komutun Yolculu\u011fu)\n\nKullan\u0131c\u0131 `python launcher.py` \u00e7al\u0131\u015ft\u0131r\u0131p bir projeye girdi\u011finde ve \"Hatay\u0131 d\u00fczelt\" dedi\u011finde arka planda \u015fu olaylar zinciri ger\u00e7ekle\u015fir:\n\n### Ad\u0131m 1: Ba\u011flam\u0131n Y\u00fcklenmesi (Context Loading)\n* `assistant.py`, `core.memory.MemoryManager`'\u0131 ba\u015flat\u0131r.\n* Kullan\u0131c\u0131n\u0131n sorusu (\"Hatay\u0131 d\u00fczelt\"), `SentenceTransformer` modeli ile **vekt\u00f6re** (say\u0131sal diziye) \u00e7evrilir.\n* ChromaDB i\u00e7inde bu vekt\u00f6re matematiksel olarak en yak\u0131n olan kod par\u00e7alar\u0131 (Chunks) bulunur.\n\n### Ad\u0131m 2: Prompt M\u00fchendisli\u011fi (Prompt Engineering)\nAI'ya giden metin \u015fu \u015fablonda birle\u015ftirilir:\n1.  **Sistem Emri (`config.SYSTEM_INSTRUCTION`):** \"Sen bir JSON makinesisin. Asla sohbet etme.\"\n2.  **RAG Ba\u011flam\u0131:** \"Veritaban\u0131ndan buldu\u011fum ilgili kodlar \u015funlar: ...\"\n3.  **Kullan\u0131c\u0131 \u0130ste\u011fi:** \"Hatay\u0131 d\u00fczelt.\"\n\n### Ad\u0131m 3: Model \u00c7a\u011fr\u0131s\u0131 ve Adaptasyon\n* Se\u00e7ili model (\u00d6rn: Gemini), `core/gemini.py` \u00fczerinden \u00e7a\u011fr\u0131l\u0131r.\n* Her model farkl\u0131 yan\u0131t verse de (Object, Dict, Text), adapt\u00f6rler bunu standart bir formata \u00e7evirir.\n\n### Ad\u0131m 4: JSON Temizli\u011fi ve G\u00fcvenlik\n* AI'dan gelen yan\u0131t `clean_json_string()` fonksiyonuna girer. Markdown etiketleri (` ```json `) temizlenir.\n* Saf JSON parse edilir.\n* **G\u00fcvenlik:** AI \"Bilgisayar\u0131 kapat\" diyemez. Sadece `dosya_olustur` veya `dosya_sil` komutlar\u0131 i\u015flenir.\n\n### Ad\u0131m 5: \u0130\u015flem ve Yedekleme\n* Dosya yaz\u0131lmadan \u00f6nce `backup_file()` fonksiyonu devreye girer.\n* Hedef dosyan\u0131n bir kopyas\u0131 `.gassist_backups` klas\u00f6r\u00fcne zaman damgas\u0131yla (timestamp) kaydedilir.\n* Yeni i\u00e7erik yaz\u0131l\u0131r.\n\n---\n\n## 4. \ud83d\udd27 Kritik Konfig\u00fcrasyonlar (`config.py`)\n\nGeli\u015ftiricilerin bilmesi gereken hassas ayarlar:\n\n* **`SYSTEM_INSTRUCTION`:** Sistemsel prompt. AI'n\u0131n \"Suskun\" olmas\u0131n\u0131 sa\u011flayan yer buras\u0131d\u0131r. Buradaki kurallar gev\u015fetilirse sistemin JSON parse yetene\u011fi bozulabilir.\n* **`MAX_FILE_SIZE`:** Varsay\u0131lan 5MB. AI'n\u0131n token limitini patlatmamas\u0131 i\u00e7in b\u00fcy\u00fck dosyalar (loglar, binaryler) okunmaz.\n* **`PRICING_RATES`:** Maliyet hesaplama tablosu. Statiktir, API fiyatlar\u0131 de\u011fi\u015firse manuel g\u00fcncellenmelidir.\n\n---\n\n## 5. \ud83d\udee0\ufe0f Geli\u015ftirici Ara\u00e7 Seti (DevTools)\n\nProjeyi debug etmek veya y\u00f6netmek i\u00e7in kullan\u0131lan \"\u0130svi\u00e7re \u00c7ak\u0131s\u0131\" ara\u00e7lar\u0131:\n\n| Ara\u00e7 | Dosya | G\u00f6revi |\n| :--- | :--- | :--- |\n| **Haf\u0131za M\u00fcfetti\u015fi** | `debug.py` | ChromaDB veritaban\u0131na ba\u011flan\u0131r, vekt\u00f6rleri ve kay\u0131tl\u0131 kod par\u00e7alar\u0131n\u0131 ham haliyle g\u00f6sterir. |\n| **Sistem Doktoru** | `system_audit.py` | Dosya izinlerini, log boyutlar\u0131n\u0131 ve veritaban\u0131 b\u00fct\u00fcnl\u00fc\u011f\u00fcn\u00fc (integrity) kontrol eder. |\n| **Proje Ta\u015f\u0131y\u0131c\u0131** | `migrate_projects.py` | `my_projects` d\u0131\u015f\u0131ndaki \"sahipsiz\" projeleri bulup i\u00e7eriye ta\u015f\u0131r. |\n| **Belgeleyici** | `generate_docs.py` | T\u00fcm kod yap\u0131s\u0131n\u0131 tek bir Markdown dosyas\u0131na d\u00f6ker (LLM analizi i\u00e7in). |\n\n---\n\n## 6. \ud83d\ude80 Gelecek Planlar\u0131 ve Geni\u015fletilebilirlik\n\nBu mimari \u015funlara izin verecek \u015fekilde tasarlanm\u0131\u015ft\u0131r:\n* **Yeni Model Ekleme:** Sadece `core/` alt\u0131na yeni bir `.py` dosyas\u0131 ekleyerek.\n* **Resim Deste\u011fi:** `assistant.py` g\u00fcncellenerek Gemini 1.5 Pro'nun Vision \u00f6zellikleri a\u00e7\u0131labilir.\n* **Web Aray\u00fcz\u00fc:** Logic (Mant\u0131k) ve UI (Aray\u00fcz) ayr\u0131ld\u0131\u011f\u0131 i\u00e7in, `launcher.py` yerine bir `app.py` (Flask/Streamlit) yaz\u0131larak kolayca web'e ta\u015f\u0131nabilir.\n\n---\n**Geli\u015ftirici:** Ahmet \u00c7etin\n*Bu dok\u00fcman Coder-Asistan v2.0 mimarisini yans\u0131t\u0131r.*\n```\n\n#### \ud83d\udcc4 Dosya: `assistant.py`\n\n```py\nimport sys\nimport os\nimport re\nimport json\nimport shutil\nimport difflib\nimport time\nfrom datetime import datetime\nfrom typing import List, Optional, Any, Tuple, Dict\n\n# --- PROJE MOD\u00dcLLER\u0130 ---\ntry:\n    import config\n    from config import Colors, PRICING_RATES\n    from core.memory import MemoryManager\n    from core.gemini import GeminiModel \n    from core.orchestrator import AgentOrchestrator\nexcept ImportError:\n    print(\"\u26a0\ufe0f  Kritik mod\u00fcller y\u00fcklenemedi. L\u00fctfen k\u00fct\u00fcphanelerin y\u00fckl\u00fc oldu\u011fundan emin olun.\")\n\n# --- SAB\u0130TLER ---\nFILE_PATTERN = re.compile(r\"[\\w-]+\\.(py|js|html|css|md|json|txt|java|cpp|h|ts|jsx|tsx|sh|env|sql|xml|yaml)\", re.IGNORECASE)\n\n# ==========================================\n# \ud83d\udee0\ufe0f YARDIMCI FONKS\u0130YONLAR\n# ==========================================\n\ndef is_safe_path(file_path: str, current_directory: str) -> bool:\n    try:\n        if os.path.isabs(file_path): return False\n        if '..' in file_path: return False\n        target_path = os.path.abspath(os.path.join(current_directory, file_path))\n        safe_root = os.path.abspath(current_directory)\n        return target_path.startswith(safe_root)\n    except: return False\n\ndef show_diff(file_path: str, old_content: str, new_content: str):\n    \"\"\"Dosyadaki de\u011fi\u015fiklikleri terminalde g\u00f6rsel olarak g\u00f6sterir.\"\"\"\n    print(f\"\\n{Colors.BOLD}{Colors.CYAN}\ud83d\udd0d DE\u011e\u0130\u015e\u0130KL\u0130K \u00d6ZET\u0130 ({file_path}):{Colors.RESET}\")\n    \n    old_lines = old_content.splitlines(keepends=True)\n    new_lines = new_content.splitlines(keepends=True)\n    \n    diff = difflib.unified_diff(old_lines, new_lines, fromfile='Eski', tofile='Yeni', n=0)\n    \n    has_changes = False\n    for line in diff:\n        has_changes = True\n        if line.startswith('+') and not line.startswith('+++'):\n            print(f\"{Colors.GREEN}{line.strip()}{Colors.RESET}\")\n        elif line.startswith('-') and not line.startswith('---'):\n            print(f\"{Colors.RED}{line.strip()}{Colors.RESET}\")\n        elif line.startswith('@@'):\n            print(f\"{Colors.MAGENTA}{line.strip()}{Colors.RESET}\")\n            \n    if not has_changes:\n        print(f\"{Colors.GREY}De\u011fi\u015fiklik tespit edilmedi (i\u00e7erik ayn\u0131).{Colors.RESET}\")    \n\ndef clean_json_string(json_string: str) -> Optional[Dict]:\n    if isinstance(json_string, dict): return json_string\n    try:\n        if \"```\" in json_string:\n            lines = json_string.split('\\n')\n            clean_lines = []\n            capture = False\n            for line in lines:\n                if \"```\" in line:\n                    capture = not capture\n                    continue\n                if capture:\n                    clean_lines.append(line)\n            json_string = \"\\n\".join(clean_lines) if clean_lines else json_string.replace(\"```json\", \"\").replace(\"```\", \"\")\n\n        json_string = json_string.strip()\n        if json_string.rfind('}') != -1:\n            json_string = json_string[:json_string.rfind('}')+1]\n        \n        return json.loads(json_string)\n    except Exception:\n        return None\n\ndef backup_file(full_path: str) -> Optional[str]:\n    if not os.path.exists(full_path): return None\n    os.makedirs(config.BACKUP_DIR, exist_ok=True)\n    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')\n    backup_name = f\"{os.path.basename(full_path)}.{timestamp}.backup\"\n    shutil.copy(full_path, os.path.join(config.BACKUP_DIR, backup_name))\n    return backup_name\n\ndef log_conversation(working_dir: str, user_prompt: str, ai_explanation: str, model_name: str, cost: float = 0.0):\n    log_file = os.path.join(working_dir, \".chat_history.log\")\n    timestamp = datetime.now().strftime('%Y-%m-%d %H:%M')\n    log_entry = (\n        f\"{'\u2550'*60}\\n\ud83d\udcc5 ZAMAN: {timestamp} | \ud83e\udd16 MODEL: {model_name}\\n\"\n        f\"\ud83d\udcb0 MAL\u0130YET: ${cost:.5f}\\n\ud83d\udc64 USER: {user_prompt}\\n\ud83e\udd16 AI:   {ai_explanation}\\n\"\n    )\n    try:\n        with open(log_file, \"a\", encoding=\"utf-8\") as f: f.write(log_entry)\n    except: pass\n\ndef update_project_stats(working_dir: str, usage_data: dict, model_key: str) -> Tuple[float, float]:\n    stats_file = os.path.join(working_dir, \".project_stats.json\")\n    stats = {\"total_cost\": 0.0, \"total_input_tokens\": 0, \"total_output_tokens\": 0, \"last_updated\": \"\"}\n    if os.path.exists(stats_file):\n        try:\n            with open(stats_file, 'r', encoding='utf-8') as f: stats = json.load(f)\n        except: pass\n\n    in_tokens = usage_data.get(\"input_tokens\", 0)\n    out_tokens = usage_data.get(\"output_tokens\", 0)\n    rates = PRICING_RATES.get(model_key, {\"input\": 0, \"output\": 0})\n    current_cost = ((in_tokens / 1_000_000) * rates[\"input\"]) + ((out_tokens / 1_000_000) * rates[\"output\"])\n\n    stats[\"total_cost\"] += current_cost\n    stats[\"total_input_tokens\"] += in_tokens\n    stats[\"total_output_tokens\"] += out_tokens\n    stats[\"last_updated\"] = datetime.now().strftime('%Y-%m-%d %H:%M:%S')\n\n    try:\n        with open(stats_file, 'w', encoding='utf-8') as f: json.dump(stats, f, indent=4)\n    except: pass\n    return current_cost, stats[\"total_cost\"]\n\n# ==========================================\n# \ud83d\ude80 ANA \u0130\u015eLEM MOTORU (AGENTIC)\n# ==========================================\n\ndef process_single_turn(prompt_text: str, orchestrator: AgentOrchestrator, working_dir: str, memory: Any, is_dry_run: bool = False):\n    \"\"\"Hibrit RAG ba\u011flam\u0131 ile iste\u011fi ak\u0131ll\u0131ca y\u00f6nlendirir.\"\"\"\n    \n    # 1. H\u0130BR\u0130T HAFIZA SORGUSU (Ba\u011flam\u0131 her durumda al\u0131yoruz)\n    rag_context = \"\"\n    if memory:\n        print(f\"{Colors.CYAN}\ud83d\udd0d Hibrit Haf\u0131za taran\u0131yor...{Colors.RESET}\")\n        rag_context = memory.query(prompt_text, n_results=config.MAX_CONTEXT_RESULTS)\n        if len(rag_context) > config.MAX_CONTEXT_CHARS:\n            rag_context = rag_context[:config.MAX_CONTEXT_CHARS] + \"\\n...(K\u0131rp\u0131ld\u0131)...\"\n\n    # --- \ud83d\udee1\ufe0f 1. G\u00dcNCELLENM\u0130\u015e S\u0130STEMSEL KOMUT F\u0130LTRES\u0130 (KISA DEVRE) ---\n    sorgu_temiz = prompt_text.lower().strip()\n    sistem_komutlari = [\"tara\", \"indeksle\", \"haf\u0131zay\u0131 g\u00fcncelle\", \"yenile\", \"reindex\"]\n    aksiyon_kelimeleri = [\"yerine\", \"yap\", \"de\u011fi\u015ftir\", \"ekle\", \"d\u00fczelt\", \"sil\"]\n    \n    # Sadece sistemle ilgiliyse ve de\u011fi\u015fiklik/aksiyon i\u00e7ermiyorsa k\u0131sa devre yap\n    if any(k in sorgu_temiz for k in sistem_komutlari) and not any(x in sorgu_temiz for x in aksiyon_kelimeleri):\n        print(f\"{Colors.GREEN}\u2699\ufe0f  Sistem i\u015flemi alg\u0131land\u0131, dosyalar taran\u0131yor...{Colors.RESET}\")\n        if memory:\n            files = [f for f in os.listdir(working_dir) if FILE_PATTERN.match(f)]\n            memory.index_files(files)\n            print(f\"{Colors.GREEN}\u2705 Haf\u0131za g\u00fcncellendi. Art\u0131k sorular\u0131n\u0131z\u0131 sorabilirsiniz.{Colors.RESET}\")\n            return \n\n    # --- \ud83d\udee1\ufe0f 2. F\u0130LTRE: B\u0130LG\u0130 SORGUSU / SORU MODU ---\n    soru_kelimeleri = [\"nedir\", \"ka\u00e7\", \"nas\u0131l\", \"kim\", \"nerede\", \"neden\", \"bilgi ver\", \"anlat\", \"?\"]\n    is_question = any(q in sorgu_temiz for q in soru_kelimeleri)\n\n    if is_question and not any(x in sorgu_temiz for x in aksiyon_kelimeleri):\n        print(f\"{Colors.MAGENTA}\u2139\ufe0f  Soru alg\u0131land\u0131, do\u011frudan yan\u0131tlan\u0131yor...{Colors.RESET}\")\n        try:\n            raw_res = orchestrator.developer.generate_content(\n                \"Sen bilgili bir yaz\u0131l\u0131m asistan\u0131s\u0131n. SADECE kullan\u0131c\u0131ya bilgi ver. Kod yazma, dosya de\u011fi\u015ftirme plan\u0131 yapma.\",\n                f\"HAFIZADAN GELEN B\u0130LG\u0130LER:\\n{rag_context}\\n\\nKULLANICI SORUSU: {prompt_text}\"\n            )\n            content = raw_res[\"content\"] if isinstance(raw_res, dict) else str(raw_res)\n            print(f\"\\n{Colors.MAGENTA}\ud83e\udd16 CEVAP:{Colors.RESET} {Colors.CYAN}{content}{Colors.RESET}\")\n            \n            if isinstance(raw_res, dict):\n                current_cost, total_cost = update_project_stats(working_dir, raw_res.get(\"usage\", {}), raw_res.get(\"model_key\", \"\"))\n                print(f\"{Colors.GREY}\ud83d\udcca Maliyet: ${current_cost:.5f}{Colors.RESET}\")\n            return\n        except Exception as e:\n            print(f\"{Colors.RED}Soru yan\u0131tlan\u0131rken hata olu\u015ftu: {e}{Colors.RESET}\")\n            return\n\n    # --- 3. NORMAL AKI\u015e: ORCHESTRATOR (M\u0130MAR + M\u00dcHEND\u0130S) ---\n    raw_response = orchestrator.execute_workflow(prompt_text, rag_context, working_dir)\n    \n    if not raw_response:\n        print(f\"{Colors.YELLOW}\u26a0\ufe0f \u0130\u015flem durduruldu veya iptal edildi.{Colors.RESET}\")\n        return\n\n    # 4. YANIT ANAL\u0130Z\u0130\n    if isinstance(raw_response, dict):\n        content = raw_response.get(\"content\", \"\")\n        usage = raw_response.get(\"usage\", {})\n        model_key = raw_response.get(\"model_key\", \"unknown\")\n    else:\n        content = raw_response\n        usage = {}\n        model_key = \"unknown\"\n\n    ai_response_plan = clean_json_string(content)\n    \n    if ai_response_plan is None:\n        print(f\"{Colors.RED}\u274c M\u00fchendis yan\u0131t\u0131 JSON format\u0131nda de\u011fil. \u0130\u015flem iptal edildi.{Colors.RESET}\")\n        return\n\n    # \u0130statistik ve Maliyet\n    current_cost, total_cost = update_project_stats(working_dir, usage, model_key)\n    print(f\"\\n{Colors.GREY}\ud83d\udcca \u0130\u015flem Maliyeti: {Colors.GREEN}${current_cost:.5f}{Colors.RESET} (Proje Toplam\u0131: ${total_cost:.5f})\")\n\n    # 5. UYGULAMA (Dosya \u0130\u015flemleri)\n    explanation = ai_response_plan.get(\"aciklama\", \"\u0130\u015flem tamamland\u0131.\")\n    files_create = ai_response_plan.get(\"dosya_olustur\", {})\n    files_delete = ai_response_plan.get(\"dosya_sil\", [])\n\n    print(f\"\\n{Colors.MAGENTA}\ud83e\udd16 SONU\u00c7:{Colors.RESET} {Colors.CYAN}{explanation}{Colors.RESET}\")\n    \n    if is_dry_run: return\n\n    # Silme\n    for p in files_delete:\n        if is_safe_path(p, working_dir):\n            full = os.path.join(working_dir, p)\n            if os.path.exists(full):\n                backup_file(full); os.remove(full)\n                print(f\"{Colors.RED}\ud83d\uddd1\ufe0f Silindi: {p}{Colors.RESET}\")\n\n    # Yazma\n    new_files = []\n    # ... (Dosya Yazma D\u00f6ng\u00fcs\u00fc \u0130\u00e7inde) ...\n    for p, content in files_create.items():\n        if is_safe_path(p, working_dir):\n            full = os.path.join(working_dir, p)\n            try:\n                os.makedirs(os.path.dirname(full), exist_ok=True)\n                \n                # \u00d6zet G\u00f6sterimi:\n                old_text = \"\"\n                if os.path.exists(full):\n                    with open(full, 'r', encoding='utf-8') as f:\n                        old_text = f.read()\n                \n                # De\u011fi\u015fiklikleri ekrana bas\n                show_diff(p, old_text, content)\n                \n                # Kay\u0131t \u0130\u015flemi\n                if os.path.exists(full): backup_file(full)\n                with open(full, 'w', encoding='utf-8') as f: f.write(content)\n                print(f\"{Colors.GREEN}\ud83d\udcbe Yaz\u0131ld\u0131 ve Haf\u0131zaya Al\u0131nd\u0131: {p}{Colors.RESET}\")\n                new_files.append(p)\n            except Exception as e:\n                 print(f\"{Colors.RED}Dosya hatas\u0131 ({p}): {e}{Colors.RESET}\")\n\n    # Haf\u0131zay\u0131 G\u00fcncelle (Yeni yaz\u0131lan dosyalar\u0131 otomatik indeksle)\n    if memory and new_files:\n        memory.index_files(new_files)\n\n    log_conversation(working_dir, prompt_text, explanation, \"Agent-Workflow\", current_cost)\n\n# ==========================================\n# \ud83c\udf1f PROJE ANA D\u00d6NG\u00dcS\u00dc\n# ==========================================\n\ndef main(project_name):\n    project_path = os.path.abspath(os.path.join(config.PROJECTS_DIR, project_name))\n    \n    if not os.path.exists(project_path):\n        print(f\"{Colors.RED}Hata: {project_path} yolu mevcut de\u011fil.{Colors.RESET}\")\n        return\n\n    print(f\"\\n{Colors.GREEN}\ud83d\ude80 OTURUM BA\u015eLATILDI: {project_name.upper()}{Colors.RESET}\")\n\n    try:\n        orchestrator = AgentOrchestrator()\n        memory = MemoryManager(project_root=project_path)\n    except Exception as e:\n        print(f\"{Colors.RED}Ba\u015flatma hatas\u0131: {e}{Colors.RESET}\")\n        return\n\n    print(f\"{Colors.CYAN}{'\u2501'*50}{Colors.RESET}\")\n    print(f\"Sohbet Aktif. 'q': \u00e7\u0131k\u0131\u015f | 'b': ana men\u00fc\")\n    \n    while True:\n        try:\n            user_input = input(f\"{Colors.BOLD}{Colors.YELLOW}({project_name}) > {Colors.RESET}\").strip()\n            \n            if user_input.lower() in ['exit', 'q', 'quit', 'b']:\n                break\n            \n            if not user_input: continue\n            \n            process_single_turn(user_input, orchestrator, project_path, memory)\n            \n        except KeyboardInterrupt:\n            break\n        except Exception as e:\n            print(f\"{Colors.RED}Beklenmedik Hata: {e}{Colors.RESET}\")\n\nif __name__ == \"__main__\":\n    print(\"L\u00fctfen 'launcher.py' kullan\u0131n.\")\n```\n\n#### \ud83d\udcc4 Dosya: `check_models.py`\n\n```py\nimport os\nimport sys\n\n# google-genai y\u00fckl\u00fc m\u00fc kontrol et\ntry:\n    from google import genai\nexcept ImportError:\n    print(\"\u274c HATA: 'google-genai' k\u00fct\u00fcphanesi bulunamad\u0131.\")\n    sys.exit(1)\n\napi_key = os.getenv(\"GOOGLE_API_KEY\")\nif not api_key:\n    print(\"\u274c HATA: GOOGLE_API_KEY tan\u0131ml\u0131 de\u011fil!\")\n    sys.exit(1)\n\nprint(f\"\ud83d\udd11 Anahtar ile ba\u011flan\u0131l\u0131yor... (Son 4 hane: {api_key[-4:]})\")\n\ntry:\n    client = genai.Client(api_key=api_key)\n    print(\"\\n\ud83d\udce1 --- HESABINIZDA AKT\u0130F OLAN MODELLER ---\")\n    \n    count = 0\n    # Modelleri \u00e7ek ve listele\n    # Pager \u00fczerinden d\u00f6ner, listeye \u00e7evirelim\n    for m in client.models.list():\n        # Sadece i\u00e7erik \u00fcretebilen modelleri al\n        if \"generateContent\" in m.supported_actions:\n            # \u0130smi temizle (models/ \u00f6nekini at)\n            clean_name = m.name.replace('models/', '')\n            print(f\"\u2705 {clean_name}\")\n            count += 1\n            \n    if count == 0:\n        print(\"\\n\u26a0\ufe0f HATA: Hi\u00e7bir model bulunamad\u0131. API Key'inizin yetkilerini kontrol edin.\")\n    else:\n        print(\"\\n\ud83d\udc49 \u0130PUCU: Yukar\u0131daki \u2705 ile ba\u015flayan isimlerden birini config.py dosyas\u0131na kopyalay\u0131n.\")\n\nexcept Exception as e:\n    print(f\"\\n\u274c BA\u011eLANTI HATASI: {e}\")\n```\n\n#### \ud83d\udcc4 Dosya: `config.py`\n\n```py\nimport os\n\n# ==========================================\n# \ud83c\udfa8 RENK AYARLARI\n# ==========================================\nclass Colors:\n    GREEN = '\\033[92m'\n    RED = '\\033[91m'\n    YELLOW = '\\033[93m'\n    BLUE = '\\033[94m'\n    CYAN = '\\033[96m'\n    MAGENTA = '\\033[95m'\n    GREY = '\\033[90m'\n    BOLD = '\\033[1m'\n    RESET = '\\033[0m'\n\n# ==========================================\n# \u2699\ufe0f S\u0130STEM VE DOSYA AYARLARI\n# ==========================================\nMAX_FILE_SIZE = 5 * 1024 * 1024\nMAX_TOTAL_SIZE = 20 * 1024 * 1024\nBACKUP_DIR = \".gassist_backups\"\nMAX_BACKUPS_PER_FILE = 5\nMEMORY_DIR_NAME = \".coder_memory\"\nCOLLECTION_NAME = \"project_codebase\"\nEMBEDDING_MODEL = \"paraphrase-multilingual-MiniLM-L12-v2\"\nMAX_CONTEXT_RESULTS = 3\nMAX_CONTEXT_CHARS = 12000\nMAX_BACKUPS_PER_FILE = 10\n\n\n# YEN\u0130: Projelerin toplanaca\u011f\u0131 ana klas\u00f6r\nPROJECTS_DIR = \"my_projects\"\n\n# ==========================================\n# \ud83d\udcb0 MAL\u0130YET VE KATMAN\n# ==========================================\nUSER_TIER = 'free' \nPRICING_RATES = {\n    \"gemini-2.5-flash-lite\": { \"input\": 0.075, \"output\": 0.30 },\n    \"gemini-2.5-flash\": { \"input\": 0.10, \"output\": 0.40 },\n    \"llama-3.3-70b-versatile\": { \"input\": 0.59, \"output\": 0.79 },\n    \"deepseek-chat\": { \"input\": 0.14, \"output\": 0.28 },\n    \"Qwen/Qwen2.5-Coder-7B-Instruct\": { \"input\": 0.0, \"output\": 0.0 }\n}\n\n# ==========================================\n# \ud83e\udd16 MODEL AYARLARI\n# ==========================================\n\nMODEL_CONFIGS = {\n    \"gemini\": {\n        \"env_var\": \"GOOGLE_API_KEY\",\n        \"model_name\": \"gemini-2.5-flash-lite\", \n        \"display_name\": \"Google Gemini 2.5 Flash Lite\",\n    },\n    \"groq\": {\n        \"env_var\": \"GROQ_API_KEY\",\n        \"model_id\": \"llama-3.3-70b-versatile\",\n        \"display_name\": \"Groq Llama 3.3 70B\",\n    },\n    \"deepseek\": {\n        \"env_var\": \"DEEPSEEK_API_KEY\",\n        \"model_id\": \"deepseek-chat\",\n        \"display_name\": \"DeepSeek Chat\",\n    },\n    \"huggingface\": {\n        \"env_var\": \"HUGGINGFACE_API_KEY\",\n        \"model_id\": \"Qwen/Qwen2.5-Coder-7B-Instruct\",\n        \"display_name\": \"Hugging Face Qwen\",\n    }\n}\nACTIVE_PROFILE = 'gemini'\n# ==========================================\n# \ud83d\ude80 AKT\u0130F PROF\u0130L SE\u00c7\u0130M\u0130 (Eksik Olan K\u0131s\u0131m)\n# ==========================================\n# Buraya MODEL_CONFIGS i\u00e7indeki anahtarlardan birini yazmal\u0131s\u0131n:\n# Se\u00e7enekler: 'gemini', 'groq', 'deepseek', 'huggingface'\n\n\n# ==========================================\n# \ud83e\udde0 YEN\u0130 AI S\u0130STEM TAL\u0130MATI (Ak\u0131ll\u0131 JSON Modu)\n# ==========================================\n# config.py i\u00e7indeki SYSTEM_INSTRUCTION k\u0131sm\u0131n\u0131 \u015fununla de\u011fi\u015ftirin veya ekleyin:\n\n# M\u0130MAR \u0130\u00c7\u0130N (Groq)\nARCHITECT_INSTRUCTION = (\n    \"Sen uzman bir yaz\u0131l\u0131m mimar\u0131s\u0131n. G\u00f6revin, kullan\u0131c\u0131 iste\u011fini analiz etmek ve bir uygulama plan\u0131 \u00e7\u0131karmakt\u0131r.\\n\"\n    \"KURALLAR:\\n\"\n    \"1. Kod yazma, sadece hangi dosyalar\u0131n neden de\u011fi\u015fmesi gerekti\u011fini a\u00e7\u0131kla.\\n\"\n    \"2. Yan\u0131t\u0131n \u015fu JSON format\u0131nda olmal\u0131:\\n\"\n    \"{\\n\"\n    \"  'plan': 'Ad\u0131m ad\u0131m yap\u0131lacak i\u015flemler listesi',\\n\"\n    \"  'etkilenecek_dosyalar': ['dosya1.py', 'dosya2.py']\\n\"\n    \"}\"\n)\n\n# M\u00dcHEND\u0130S \u0130\u00c7\u0130N (Gemini)\nDEVELOPER_INSTRUCTION = (\n    \"Sen uzman bir yaz\u0131l\u0131m geli\u015ftiricisin. Mimar\u0131n sundu\u011fu plana g\u00f6re kodlar\u0131 yazmal\u0131s\u0131n.\\n\"\n    \"KURALLAR:\\n\"\n    \"1. Sadece ge\u00e7erli bir JSON objesi d\u00f6nd\u00fcr.\\n\"\n    \"2. Format:\\n\"\n    \"{\\n\"\n    \"  'aciklama': 'Yap\u0131lan i\u015flemin \u00f6zeti',\\n\"\n    \"  'dosya_olustur': {'yol': 'icerik'},\\n\"\n    \"  'dosya_sil': []\\n\"\n    \"}\"\n)\n\n# ==========================================\n# \ud83e\udde0 HAFIZA PROF\u0130LLER\u0130 (Men\u00fcde G\u00f6r\u00fcnecekler)\n# ==========================================\nMEMORY_PROFILES = {\n    \"1\": {\n        \"model_name\": \"all-MiniLM-L6-v2\",\n        \"display\": \"Hafif (Light)\",\n        \"desc\": \"\ud83d\ude80 En H\u0131zl\u0131s\u0131 | D\u00fc\u015f\u00fck RAM | 384 Boyut | Genel projeler i\u00e7in ideal.\",\n        \"dim\": 384\n    },\n    \"2\": {\n        \"model_name\": \"paraphrase-multilingual-MiniLM-L12-v2\",\n        \"display\": \"Dengeli (Medium)\",\n        \"desc\": \"\u2696\ufe0f  Daha \u0130yi T\u00fcrk\u00e7e | Orta H\u0131z | 384 Boyut | Karma\u015f\u0131k metinler i\u00e7in.\",\n        \"dim\": 384\n    },\n    \"3\": {\n        \"model_name\": \"all-mpnet-base-v2\",\n        \"display\": \"G\u00fc\u00e7l\u00fc (Heavy)\",\n        \"desc\": \"\ud83e\udde0 En Y\u00fcksek Do\u011fruluk | Yava\u015f | 768 Boyut | Akademik/Derin analiz i\u00e7in.\",\n        \"dim\": 768\n    }\n}\n# ==========================================\n# \ud83d\ude80 AKT\u0130F MODEL VE HAFIZA SE\u00c7\u0130M\u0130\n# ==========================================\n# Se\u00e7enekler: 'gemini', 'groq', 'deepseek', 'huggingface'\nACTIVE_MODEL = \"gemini\" \n\n# Haf\u0131za Ayar\u0131\nEMBEDDING_MODEL = \"paraphrase-multilingual-MiniLM-L12-v2\"\n\n```\n\n#### \ud83d\udcc4 Dosya: `debug.py`\n\n```py\nimport os\nimport sys\nfrom pathlib import Path\nfrom core.memory import MemoryManager\nimport config\nfrom config import Colors\n\ndef inspect_project():\n    workspace = Path.cwd() / config.PROJECTS_DIR\n    projects = [d for d in workspace.iterdir() if d.is_dir() and (d / \".coder_memory\").exists()]\n    \n    if not projects:\n        print(f\"{Colors.RED}\u0130ncelenecek aktif haf\u0131zal\u0131 proje bulunamad\u0131.{Colors.RESET}\")\n        return\n\n    print(f\"\\n{Colors.CYAN}\ud83d\udd75\ufe0f HAFIZA M\u00dcFETT\u0130\u015e\u0130: Proje Se\u00e7in{Colors.RESET}\")\n    for idx, p in enumerate(projects, 1):\n        print(f\"[{idx}] {p.name}\")\n    \n    choice = input(\"\\nSe\u00e7im: \")\n    if not choice.isdigit() or int(choice) > len(projects): return\n    \n    target_proj = projects[int(choice)-1]\n    memory = MemoryManager(str(target_proj))\n    \n    while True:\n        print(f\"\\n{Colors.YELLOW}--- {target_proj.name} Haf\u0131za Men\u00fcs\u00fc ---{Colors.RESET}\")\n        print(\"[1] Anlamsal Sorgu Testi (RAG Test)\")\n        print(\"[2] T\u00fcm Kay\u0131tl\u0131 Dosyalar\u0131 Listele\")\n        print(\"[3] Belirli Bir Dosyan\u0131n Haf\u0131zas\u0131n\u0131 Sil\")\n        print(\"[Q] \u00c7\u0131k\u0131\u015f\")\n        \n        sub_choice = input(\"\\nSe\u00e7im: \").lower()\n        \n        if sub_choice == '1':\n            q = input(\"\ud83d\udd0d AI gibi bir soru sorun: \")\n            res = memory.query(q)\n            print(f\"\\n{Colors.GREEN}\ud83d\udd0e BULUNAN BA\u011eLAM:{Colors.RESET}\\n{res}\")\n            \n        elif sub_choice == '2':\n            res = memory.collection.get()\n            print(f\"\\n{Colors.CYAN}\ud83d\udcd1 \u0130NDEKSLENM\u0130\u015e DOSYALAR:{Colors.RESET}\")\n            for mid in res['ids']: print(f\"  - {mid}\")\n            \n        elif sub_choice == '3':\n            fname = input(\"Silinecek dosya yolu (\u00f6rn: main.py): \")\n            try:\n                memory.collection.delete(ids=[fname])\n                print(f\"{Colors.RED}\ud83d\uddd1\ufe0f {fname} haf\u0131zadan silindi.{Colors.RESET}\")\n            except: print(\"Hata: Dosya bulunamad\u0131.\")\n            \n        elif sub_choice == 'q': break\n\nif __name__ == \"__main__\":\n    inspect_project()\n```\n\n#### \ud83d\udcc4 Dosya: `generate_docs.py`\n\n```py\nimport os\nimport sys\n\n# ==========================================\n# \u2699\ufe0f AYARLAR VE F\u0130LTRELER\n# ==========================================\n\n# Sadece i\u00e7eri\u011fi taranmayacak sistem klas\u00f6rleri\nDIKKATE_ALINMAYACAK_DIZINLER = [\n    '.git', '__pycache__', 'venv', '.venv', 'env', '.env', 'node_modules', \n    '.vscode', '.idea', 'dist', 'build', 'target', 'bin',\n    '__macosx', '.ds_store', 'logs', 'site-packages', 'lib', 'include',\n    '.gassist_backups', '.coder_memory'\n]\n\n# \u0130\u00e7eri\u011fi d\u00f6k\u00fclmeyecek ama varl\u0131\u011f\u0131 g\u00f6sterilecek \"\u00d6zel\" klas\u00f6rler\nOZEL_USER_KLASORLERI = ['my_projects']\n\n# \u0130\u00e7eri\u011fi d\u00f6k\u00fcme eklenecek kod uzant\u0131lar\u0131\nBELGELENECEK_KOD_UZANTILARI = [\n    '.py', '.php', '.js', '.html', '.css', '.json', '.xml', '.yaml', '.yml', \n    '.sh', '.bash', '.c', '.cpp', '.h', '.hpp', '.java', '.go', '.rb', '.swift', \n    '.kt', '.ts', '.jsx', '.tsx', '.conf', '.ini', '.sql', '.md', '.txt'\n]\n\n# \u00c7\u0131kt\u0131 dosyas\u0131n\u0131n ad\u0131\nCIKTI_DOSYASI = \"proje_dokumu.md\"\n\n# ==========================================\n# \ud83d\udee0\ufe0f FONKS\u0130YONLAR\n# ==========================================\n\ndef dosya_icerigini_getir(yol):\n    \"\"\"Dosya i\u00e7eri\u011fini okur ve Markdown kod blo\u011fu i\u00e7inde d\u00f6nd\u00fcr\u00fcr.\"\"\"\n    try:\n        with open(yol, 'r', encoding='utf-8') as f:\n            icerik = f.read()\n            \n        uzanti = os.path.splitext(yol)[1].lstrip('.').lower()\n        return f\"\\n```{(uzanti if uzanti else 'plaintext')}\\n{icerik}\\n```\\n\"\n    except Exception as e:\n        return f\"\\n> [Okunamad\u0131: {e}]\\n\"\n\ndef dizin_yapisi_getir(hedef_dizin):\n    \"\"\"Verilen yoldan ba\u015flayarak dizin yap\u0131s\u0131n\u0131 d\u00f6nd\u00fcr\u00fcr.\"\"\"\n    yap\u0131 = \"### \ud83d\udcc2 Proje Dizin Yap\u0131s\u0131 ve Dosyalar\\n\\n\"\n    \n    for kok, dizinler, dosyalar in os.walk(hedef_dizin):\n        # Filtreleme: Gereksiz klas\u00f6rleri gezme\n        dizinler[:] = [d for d in dizinler if d.lower() not in DIKKATE_ALINMAYACAK_DIZINLER]\n        \n        yol_parcalari = kok.lower().split(os.sep)\n        if any(yasak in yol_parcalari for yasak in DIKKATE_ALINMAYACAK_DIZINLER):\n            continue\n\n        base_name = os.path.basename(kok)\n        goreli_yol = os.path.relpath(kok, hedef_dizin)\n        \n        # A\u011fa\u00e7 yap\u0131s\u0131 ba\u015fl\u0131\u011f\u0131\n        if goreli_yol == '.':\n            seviye = 0\n            yap\u0131 += f\"- **{os.path.basename(hedef_dizin)}/** (Proje K\u00f6k\u00fc)\\n\"\n        else:\n            seviye = goreli_yol.count(os.sep) + 1\n            girinti = \"  \" * seviye\n            \n            # \u00d6zel klas\u00f6r kontrol\u00fc (my_projects gibi)\n            if base_name in OZEL_USER_KLASORLERI:\n                yap\u0131 += f\"{girinti}- **{base_name}/** (Kullan\u0131c\u0131 Projeleri - \u0130\u00e7erik Gizli)\\n\"\n                dizinler[:] = [] # Alt\u0131na inme\n                continue \n            else:\n                yap\u0131 += f\"{girinti}- **{base_name}/**\\n\"\n\n        girinti_dosya = \"  \" * (seviye + 1)\n        \n        # DOSYALARI L\u0130STELEME (Filtresiz)\n        for dosya in sorted(dosyalar):\n            # .git klas\u00f6r\u00fc i\u00e7indeki dosyalar\u0131 hari\u00e7 tut, gerisi gelsin\n            if '.git' in yol_parcalari: continue\n            \n            yap\u0131 += f\"{girinti_dosya}- {dosya}\\n\"\n                    \n    return yap\u0131\n\ndef ana_fonksiyon():\n    hedef_dizin = os.getcwd() \n    proje_adi = os.path.basename(hedef_dizin)\n    \n    dokum_metni = f\"# \ud83d\udcdd Proje D\u00f6k\u00fcm\u00fc: {proje_adi}\\n\\n\"\n    dokum_metni += f\"Bu d\u00f6k\u00fcm, **{hedef_dizin}** dizini i\u00e7in olu\u015fturulmu\u015ftur.\\n\"\n    dokum_metni += \"Not: `my_projects` klas\u00f6r\u00fcn\u00fcn i\u00e7eri\u011fi gizlilik gere\u011fi hari\u00e7 tutulmu\u015ftur.\\n\\n\"\n    \n    print(f\"1/3: '{proje_adi}' klas\u00f6r yap\u0131s\u0131 taran\u0131yor...\")\n    dokum_metni += dizin_yapisi_getir(hedef_dizin)\n    \n    dokum_metni += \"\\n---\\n\"\n    dokum_metni += \"### \ud83d\udcbb Kod \u0130\u00e7eri\u011fi D\u00f6k\u00fcm\u00fc\\n\\n\"\n    \n    print(\"2/3: Kod i\u00e7erikleri toplan\u0131yor...\")\n    \n    dosya_sayisi = 0\n    for kok, dizinler, dosyalar in os.walk(hedef_dizin):\n        dizinler[:] = [d for d in dizinler if d.lower() not in DIKKATE_ALINMAYACAK_DIZINLER]\n        \n        if os.path.basename(kok) in OZEL_USER_KLASORLERI:\n            dizinler[:] = []\n            continue\n\n        yol_parcalari = kok.lower().split(os.sep)\n        if any(yasak in yol_parcalari for yasak in DIKKATE_ALINMAYACAK_DIZINLER): continue\n\n        for dosya in sorted(dosyalar):\n            dosya_yolu = os.path.join(kok, dosya)\n            \n            # KEND\u0130S\u0130N\u0130 VE \u00c7IKTI DOSYASINI OKUMASIN (\u0130\u00e7erik D\u00f6k\u00fcm\u00fcnde)\n            if dosya == CIKTI_DOSYASI: continue\n            \n            uzanti = os.path.splitext(dosya)[1].lower()\n\n            if uzanti in BELGELENECEK_KOD_UZANTILARI:\n                goreli_yol = os.path.relpath(dosya_yolu, hedef_dizin)\n                dokum_metni += f\"\\n#### \ud83d\udcc4 Dosya: `{goreli_yol}`\\n\"\n                dokum_metni += dosya_icerigini_getir(dosya_yolu)\n                dosya_sayisi += 1\n            \n    print(f\"3/3: '{CIKTI_DOSYASI}' dosyas\u0131na kay\u0131t yap\u0131l\u0131yor...\")\n    try:\n        cikti_yolu = os.path.join(hedef_dizin, CIKTI_DOSYASI)\n        with open(cikti_yolu, 'w', encoding='utf-8') as f:\n            f.write(dokum_metni)\n        print(f\"\\n\u2705 \u0130\u015flem Ba\u015far\u0131l\u0131! Toplam {dosya_sayisi} dosya belgelendi.\")\n    except Exception as e:\n        print(f\"\\n\u274c Hata: {e}\")\n        \nif __name__ == \"__main__\":\n    ana_fonksiyon()\n```\n\n#### \ud83d\udcc4 Dosya: `launcher.py`\n\n```py\nimport os\nimport sys\nimport json\nimport time\nimport datetime\nimport importlib\n\ntry:\n    import config\nexcept ImportError:\n    print(\"HATA: config.py bulunamad\u0131!\")\n    sys.exit(1)\n\n# ==========================================\n# AYAR SE\u00c7ENEKLER\u0130\n# ==========================================\nMEMORY_OPTIONS = {\n    \"1\": {\"id\": \"all-MiniLM-L6-v2\", \"name\": \"Hafif (Light)\", \"desc\": \"\ud83d\ude80 H\u0131zl\u0131\"},\n    \"2\": {\"id\": \"paraphrase-multilingual-MiniLM-L12-v2\", \"name\": \"Dengeli (Medium)\", \"desc\": \"\u2696\ufe0f T\u00fcrk\u00e7e\"},\n    \"3\": {\"id\": \"all-mpnet-base-v2\", \"name\": \"G\u00fc\u00e7l\u00fc (Heavy)\", \"desc\": \"\ud83e\udde0 Detayl\u0131\"}\n}\n\nMODEL_OPTIONS = {\n    \"1\": {\"id\": \"gemini\", \"name\": \"Google Gemini\", \"desc\": \"\u26a1 Dengeli ve \u00dccretsiz\"},\n    \"2\": {\"id\": \"groq\", \"name\": \"Groq (Llama 3)\", \"desc\": \"\ud83d\ude80 I\u015f\u0131k H\u0131z\u0131nda\"},\n    \"3\": {\"id\": \"deepseek\", \"name\": \"DeepSeek Chat\", \"desc\": \"\ud83d\udc68\u200d\ud83d\udcbb Kodlama Uzman\u0131\"},\n    \"4\": {\"id\": \"huggingface\", \"name\": \"Hugging Face\", \"desc\": \"\ud83e\udd17 A\u00e7\u0131k Kaynak Modeller\"}\n}\n\ndef clear_screen():\n    os.system('cls' if os.name == 'nt' else 'clear')\n\ndef update_config_file(variable_name, new_value):\n    try:\n        with open(\"config.py\", \"r\", encoding=\"utf-8\") as f: lines = f.readlines()\n        with open(\"config.py\", \"w\", encoding=\"utf-8\") as f:\n            found = False\n            for line in lines:\n                if line.strip().startswith(variable_name):\n                    f.write(f'{variable_name} = \"{new_value}\"\\n'); found = True\n                else: f.write(line)\n            if not found: f.write(f'\\n{variable_name} = \"{new_value}\"\\n')\n        return True\n    except: return False\n\ndef load_projects():\n    projects = []\n    if not os.path.exists(config.PROJECTS_DIR):\n        try: os.makedirs(config.PROJECTS_DIR)\n        except: pass\n    try: items = os.listdir(config.PROJECTS_DIR)\n    except: items = []\n    for item in items:\n        path = os.path.join(config.PROJECTS_DIR, item)\n        if os.path.isdir(path):\n            meta_path = os.path.join(path, \"metadata.json\")\n            embedding_model = \"B\u0130L\u0130NM\u0130YOR\"\n            cost = 0.0\n            last_date = \"0\"\n            if os.path.exists(meta_path):\n                try:\n                    with open(meta_path, 'r') as f:\n                        data = json.load(f)\n                        embedding_model = data.get(\"embedding_model\", \"Eski\")\n                        cost = data.get(\"total_cost\", 0.0)\n                        last_date = data.get(\"last_interaction\", \"0\")\n                except: pass\n            projects.append({\"name\": item, \"embedding_model\": embedding_model, \"cost\": cost, \"last_date\": last_date})\n    return sorted(projects, key=lambda x: x['last_date'], reverse=True)\n\ndef create_new_project():\n    print(f\"\\n{config.Colors.CYAN}\u2728 Yeni Proje{config.Colors.RESET}\")\n    name = input(\"Proje \u0130smi: \").strip()\n    if not name: return\n    path = os.path.join(config.PROJECTS_DIR, name)\n    if os.path.exists(path): print(\"Zaten var!\"); time.sleep(1); return\n    try:\n        os.makedirs(path)\n        metadata = {\n            \"created_at\": str(datetime.datetime.now()),\n            \"embedding_model\": config.EMBEDDING_MODEL,\n            \"total_cost\": 0.0,\n            \"last_interaction\": str(datetime.datetime.now())\n        }\n        with open(os.path.join(path, \"metadata.json\"), 'w') as f: json.dump(metadata, f, indent=4)\n        start_project(name, config.EMBEDDING_MODEL)\n    except Exception as e: print(f\"Hata: {e}\"); input(\"Enter...\")\n\ndef start_project(name, project_embed_model):\n    if project_embed_model != config.EMBEDDING_MODEL:\n        print(f\"\\n{config.Colors.RED}\u26d4 UYUMSUZLUK: Bu proje '{project_embed_model}' kullan\u0131yor.{config.Colors.RESET}\")\n        print(\"Ayarlardan haf\u0131za modelini de\u011fi\u015ftirmeniz gerek.\"); input(\"Enter...\"); return\n\n    print(f\"\\n{config.Colors.GREEN}\ud83d\ude80 Sistem Ba\u015flat\u0131l\u0131yor...{config.Colors.RESET}\")\n    try:\n        # Kodun en ba\u015f\u0131na import assistant eklemek yerine burada dene\n        import assistant\n        importlib.reload(assistant)\n        assistant.main(name) \n    except Exception as e:\n        # Hata oldu\u011funda ekran\u0131n temizlenmesini engellemek i\u00e7in:\n        print(f\"\\n{config.Colors.RED}\u274c KR\u0130T\u0130K HATA OLU\u015eTU:{config.Colors.RESET}\")\n        import traceback\n        traceback.print_exc() # Hatan\u0131n tam yerini ve nedenini yazar\n        input(f\"\\n{config.Colors.YELLOW}Devam etmek i\u00e7in Enter'a bas\u0131n (Hata kaybolmadan okuyun)...{config.Colors.RESET}\")\n\ndef settings_menu():\n    while True:\n        clear_screen()\n        print(f\"{config.Colors.YELLOW}=== AYARLAR ==={config.Colors.RESET}\")\n        print(f\"1. Yapay Zeka Modeli : {config.Colors.GREEN}{config.ACTIVE_MODEL.upper()}{config.Colors.RESET}\")\n        print(f\"2. Haf\u0131za (RAG) Tipi : {config.Colors.CYAN}{config.EMBEDDING_MODEL}{config.Colors.RESET}\")\n        print(\"-\" * 50)\n        print(\"[M] Model De\u011fi\u015ftir\")\n        print(\"[H] Haf\u0131za De\u011fi\u015ftir\")\n        print(\"[X] Geri D\u00f6n\")\n        \n        sel = input(\"\\nSe\u00e7im: \").strip().upper()\n        \n        if sel == 'X': break\n        \n        elif sel == 'M':\n            print(f\"\\n{config.Colors.BLUE}--- MODEL SE\u00c7\u0130M\u0130 ---{config.Colors.RESET}\")\n            for k, v in MODEL_OPTIONS.items():\n                mark = \" (AKT\u0130F)\" if v['id'] == config.ACTIVE_MODEL else \"\"\n                print(f\"[{k}] {v['name']}{mark} - {v['desc']}\")\n            m_sel = input(\"Se\u00e7im: \").strip()\n            if m_sel in MODEL_OPTIONS:\n                new_val = MODEL_OPTIONS[m_sel]['id']\n                update_config_file(\"ACTIVE_MODEL\", new_val)\n                print(\"\u267b\ufe0f  Kaydedildi, yeniden ba\u015flat\u0131l\u0131yor...\"); time.sleep(1)\n                os.execv(sys.executable, ['python'] + sys.argv)\n\n        elif sel == 'H':\n            print(f\"\\n{config.Colors.BLUE}--- HAFIZA SE\u00c7\u0130M\u0130 ---{config.Colors.RESET}\")\n            for k, v in MEMORY_OPTIONS.items():\n                mark = \" (AKT\u0130F)\" if v['id'] == config.EMBEDDING_MODEL else \"\"\n                print(f\"[{k}] {v['name']}{mark} - {v['desc']}\")\n            h_sel = input(\"Se\u00e7im: \").strip()\n            if h_sel in MEMORY_OPTIONS:\n                new_val = MEMORY_OPTIONS[h_sel]['id']\n                update_config_file(\"EMBEDDING_MODEL\", new_val)\n                print(\"\u267b\ufe0f  Kaydedildi, yeniden ba\u015flat\u0131l\u0131yor...\"); time.sleep(1)\n                os.execv(sys.executable, ['python'] + sys.argv)\n\ndef main():\n    while True:\n        clear_screen()\n        importlib.reload(config)\n        projects = load_projects()\n        \n        print(f\"{config.Colors.BOLD}{config.Colors.BLUE}=== AI AS\u0130STAN (v2.4) ==={config.Colors.RESET}\")\n        print(f\"\ud83e\udd16 Model : {config.Colors.GREEN}{config.ACTIVE_MODEL.upper()}{config.Colors.RESET}\")\n        print(f\"\ud83e\udde0 Haf\u0131za: {config.Colors.YELLOW}{config.EMBEDDING_MODEL}{config.Colors.RESET}\")\n        print(\"-\" * 60)\n        \n        for idx, p in enumerate(projects, 1):\n            status = \"\u2705\" if p['embedding_model'] == config.EMBEDDING_MODEL else \"\u26d4\"\n            print(f\"[{idx}] {p['name']:<15} {status} ({p['embedding_model']})\")\n            \n        print(\"-\" * 60)\n        print(\"[N] Yeni Proje  |  [S] Ayarlar  |  [Q] \u00c7\u0131k\u0131\u015f\")\n        ch = input(\"> \").strip().upper()\n        \n        if ch == 'Q': sys.exit()\n        elif ch == 'N': create_new_project()\n        elif ch == 'S': settings_menu()\n        elif ch.isdigit():\n            idx = int(ch) - 1\n            if 0 <= idx < len(projects): start_project(projects[idx]['name'], projects[idx]['embedding_model'])\n\nif __name__ == \"__main__\":\n    main()\n```\n\n#### \ud83d\udcc4 Dosya: `migrate_projects.py`\n\n```py\nimport os\nimport shutil\nfrom pathlib import Path\n\n# Hedef\nTARGET_DIR = Path(\"my_projects\")\nif not TARGET_DIR.exists():\n    os.makedirs(TARGET_DIR)\n\nprint(\"\ud83d\ude9a Proje Ta\u015f\u0131ma \u0130\u015flemi Ba\u015fl\u0131yor...\")\n\n# Mevcut dizindeki klas\u00f6rleri tara\nfor entry in Path.cwd().iterdir():\n    # Kendi dizinimizdeki klas\u00f6rler (my_projects hari\u00e7)\n    if entry.is_dir() and entry.name != \"my_projects\" and entry.name != \"core\" and entry.name != \"venv\" and not entry.name.startswith(\".\"):\n        \n        # E\u011fer i\u00e7inde .coder_memory varsa bu bir projedir!\n        if (entry / \".coder_memory\").exists():\n            print(f\"\ud83d\udce6 Bulundu ve Ta\u015f\u0131n\u0131yor: {entry.name}\")\n            try:\n                shutil.move(str(entry), str(TARGET_DIR / entry.name))\n                print(f\"   \u2705 Ta\u015f\u0131nd\u0131.\")\n            except Exception as e:\n                print(f\"   \u274c Hata: {e}\")\n\nprint(\"\\n\ud83c\udfc1 \u0130\u015flem Tamam. Art\u0131k launcher.py'yi \u00e7al\u0131\u015ft\u0131rabilirsiniz.\")\n```\n\n#### \ud83d\udcc4 Dosya: `model_selector.py`\n\n```py\n# model_selector.py\nimport os\nfrom config import Colors, MODEL_CONFIGS\n\ndef check_api_key(env_var):\n    \"\"\"Ortam de\u011fi\u015fkeninde API anahtar\u0131 var m\u0131 kontrol eder.\"\"\"\n    key = os.getenv(env_var)\n    return key is not None and len(key) > 0\n\ndef get_available_models():\n    \"\"\"Sistemdeki kullan\u0131labilir modelleri dinamik olarak tarar.\"\"\"\n    available = {}\n    \n    # 1. Gemini Kontrol\u00fc\n    gemini_conf = MODEL_CONFIGS[\"gemini\"]\n    if check_api_key(gemini_conf[\"env_var\"]):\n        try:\n            from core.gemini import GeminiModel\n            available[\"1\"] = {\n                \"class\": GeminiModel,\n                \"name\": gemini_conf[\"display_name\"],\n                \"status\": f\"{Colors.GREEN}\u2705 Haz\u0131r{Colors.RESET}\"\n            }\n        except ImportError:\n            available[\"1\"] = {\"status\": f\"{Colors.RED}\u274c K\u00fct\u00fcphane eksik (google-genai){Colors.RESET}\"}\n    else:\n        available[\"1\"] = {\n            \"name\": gemini_conf[\"display_name\"],\n            \"status\": f\"{Colors.RED}\u274c API Key Eksik ({gemini_conf['env_var']}){Colors.RESET}\"\n        }\n\n    # 2. Hugging Face Kontrol\u00fc\n    hf_conf = MODEL_CONFIGS[\"huggingface\"]\n    if check_api_key(hf_conf[\"env_var\"]):\n        try:\n            from core.huggingface import HuggingFaceModel\n            available[\"2\"] = {\n                \"class\": HuggingFaceModel,\n                \"name\": hf_conf[\"display_name\"],\n                \"status\": f\"{Colors.GREEN}\u2705 Haz\u0131r{Colors.RESET}\"\n            }\n        except ImportError:\n             available[\"2\"] = {\"status\": f\"{Colors.RED}\u274c K\u00fct\u00fcphane eksik (requests){Colors.RESET}\"}\n    else:\n        available[\"2\"] = {\n            \"name\": hf_conf[\"display_name\"],\n            \"status\": f\"{Colors.RED}\u274c API Key Eksik ({hf_conf['env_var']}){Colors.RESET}\"\n        }\n\n    return available\n\ndef select_model_interactive():\n    \"\"\"Kullan\u0131c\u0131ya interaktif se\u00e7im men\u00fcs\u00fc sunar.\"\"\"\n    available = get_available_models()\n    \n    print(f\"\\n{Colors.BLUE}\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\")\n    print(f\"\u2551       \ud83e\udd16  AI MODEL SE\u00c7\u0130M EKRANI        \u2551\")\n    print(f\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d{Colors.RESET}\\n\")\n\n    ready_models = {}\n    \n    for key, info in available.items():\n        # E\u011fer 'class' anahtar\u0131 varsa model \u00e7al\u0131\u015ft\u0131r\u0131labilir demektir\n        if \"class\" in info:\n            ready_models[key] = info[\"class\"]\n            print(f\"  [{key}] {info['name']}  {info['status']}\")\n        else:\n            print(f\"  [{key}] {info.get('name', 'Bilinmeyen')}  {info['status']}\")\n\n    if not ready_models:\n        print(f\"\\n{Colors.RED}\u26a0\ufe0f  H\u0130\u00c7B\u0130R MODEL KULLANILAB\u0130L\u0130R DURUMDA DE\u011e\u0130L!{Colors.RESET}\")\n        print(f\"{Colors.YELLOW}L\u00fctfen .bashrc dosyas\u0131na API anahtarlar\u0131n\u0131z\u0131 ekleyin.{Colors.RESET}\")\n        return None\n\n    # Varsay\u0131lan olarak ilk haz\u0131r modeli se\u00e7\n    default_key = list(ready_models.keys())[0]\n    \n    print(f\"\\n{Colors.CYAN}Varsay\u0131lan Model: {available[default_key]['name']} (Enter'a bas){Colors.RESET}\")\n    choice = input(f\"{Colors.YELLOW}Se\u00e7iminiz [1/2]: {Colors.RESET}\").strip()\n    \n    if not choice:\n        choice = default_key\n        \n    if choice in ready_models:\n        try:\n            return ready_models[choice]()\n        except Exception as e:\n            print(f\"{Colors.RED}Model ba\u015flat\u0131l\u0131rken hata olu\u015ftu: {e}{Colors.RESET}\")\n            return None\n    else:\n        print(f\"{Colors.RED}Ge\u00e7ersiz se\u00e7im.{Colors.RESET}\")\n        return None\n```\n\n#### \ud83d\udcc4 Dosya: `readme.md`\n\n```md\n# \ud83d\ude80 Coder-Asistan\n### Haf\u0131zal\u0131, G\u00fcvenli ve Proje Odakl\u0131 AI Kodlama St\u00fcdyosu\n\n![Python](https://img.shields.io/badge/python-3.10%2B-blue)\n![License](https://img.shields.io/badge/license-MIT-green)\n![Status](https://img.shields.io/badge/status-active-success)\n\n**Coder-Asistan**, klasik \"soru sor \u2013 cevap al\" botlar\u0131ndan farkl\u0131 olarak, projelerinizi y\u00f6neten, ba\u011flam\u0131 hat\u0131rlayan ve kodu **kontroll\u00fc \u015fekilde** de\u011fi\u015ftiren **terminal tabanl\u0131 bir AI geli\u015ftirme ortam\u0131d\u0131r.**\n\nHer proje i\u00e7in ayr\u0131 bir haf\u0131za olu\u015fturur (RAG). Bir projede \u00f6\u011frendi\u011fini di\u011ferine ta\u015f\u0131maz. Ne yapt\u0131\u011f\u0131n\u0131 \u00f6nce planlar, sonra siz onaylarsan\u0131z uygular.\n\n> **K\u0131saca:** Bu bir bot de\u011fil, **AI destekli bir geli\u015ftirme \u00e7al\u0131\u015fma alan\u0131**.\n\n---\n\n## \ud83c\udfaf Temel \u00d6zellikler\n\n* **\ud83c\udfed Proje Fabrikas\u0131 (`launcher.py`):** T\u00fcm projeleri tek merkezden y\u00f6netin.\n* **\ud83e\udde0 \u0130zole Haf\u0131za:** Her projenin kendi `.coder_memory` klas\u00f6r\u00fc vard\u0131r. AI, projenizdeki dosyalar\u0131 okur ve hat\u0131rlar.\n* **\ud83d\udee1\ufe0f G\u00fcvenli Mod:** Kodlar\u0131 do\u011frudan yazmaz; \u00f6nce plan sunar, onaylarsan\u0131z i\u015fler.\n* **\ud83d\udcb0 Maliyet Takibi:** Token ba\u015f\u0131na harcamay\u0131 kuru\u015fu kuru\u015funa raporlar.\n* **\ud83d\udd0c Model \u00d6zg\u00fcrl\u00fc\u011f\u00fc:** Google Gemini, Llama 3 (Groq), DeepSeek veya Hugging Face.\n\n---\n\n## \ud83d\udce6 Kurulum (2 Dakikada Haz\u0131r)\n\n### 1\ufe0f\u20e3 Projeyi \u0130ndirin\n```bash\ngit clone [https://github.com/cetincevizcetoli/coder-asistan.git](https://github.com/cetincevizcetoli/coder-asistan.git)\ncd coder-asistan\n```\n\n### 2\ufe0f\u20e3 Sanal Ortam Olu\u015fturun (\u00d6NEML\u0130)\n\n**\ud83e\ude9f Windows:**\n```cmd\npython -m venv venv\nvenv\\Scripts\\activate\n```\n\n**\ud83d\udc27 Linux / macOS:**\n```bash\npython3 -m venv venv\nsource venv/bin/activate\n```\n*(Terminal sat\u0131r\u0131n\u0131n ba\u015f\u0131nda `(venv)` yaz\u0131s\u0131n\u0131 g\u00f6rmelisiniz.)*\n\n### 3\ufe0f\u20e3 Paketleri Y\u00fckleyin\n```bash\npip install -r requirements.txt\n```\n\n---\n\n## \ud83d\udd11 API Anahtar\u0131 Ayarlar\u0131\n\nCoder-Asistan bir beyne ihtiya\u00e7 duyar. **Google Gemini (\u00dccretsiz)** \u00f6nerilir.\n\n1. [Google AI Studio](https://aistudio.google.com/app/apikey) adresinden Key al\u0131n.\n2. Bilgisayar\u0131n\u0131za kaydedin:\n\n**\ud83e\ude9f Windows (Kal\u0131c\u0131):**\n```cmd\nsetx GOOGLE_API_KEY \"API_KEY_BURAYA_YAPISTIR\"\n```\n*(Komuttan sonra terminali kapat\u0131p yeniden a\u00e7\u0131n!)*\n\n**\ud83d\udc27 Linux / macOS:**\n```bash\necho 'export GOOGLE_API_KEY=\"API_KEY_BURAYA\"' >> ~/.bashrc\nsource ~/.bashrc\n```\n\n---\n\n## \u25b6\ufe0f Nas\u0131l Kullan\u0131l\u0131r? (Ana Kumanda)\n\nT\u00fcm sistemi y\u00f6netmek i\u00e7in tek bir komut yeterlidir:\n\n```bash\npython launcher.py\n```\n\nKar\u015f\u0131n\u0131za gelen men\u00fcden:\n* **[N]** ile yeni proje olu\u015fturabilir,\n* **[1-9]** ile mevcut projelerinize girip AI ile \u00e7al\u0131\u015fmaya ba\u015flayabilirsiniz.\n* **[E]** ile projelerinizi ZIP olarak yedekleyebilirsiniz.\n\n---\n\n## \ud83d\udee0\ufe0f \u0130svi\u00e7re \u00c7ak\u0131s\u0131: Yard\u0131mc\u0131 Ara\u00e7lar\n\nBu projede sadece kod yazan bir asistan yok, i\u015finizi kolayla\u015ft\u0131racak bir dizi **profesyonel ara\u00e7** bulunur. \u0130\u015fte alet \u00e7antan\u0131z:\n\n### 1. \ud83d\udd75\ufe0f\u200d\u2642\ufe0f Haf\u0131za M\u00fcfetti\u015fi (`debug.py`)\nAI'n\u0131n projeniz hakk\u0131nda ne bildi\u011fini merak m\u0131 ediyorsunuz? Vekt\u00f6r veritaban\u0131n\u0131n i\u00e7ine girip kaydedilen kod par\u00e7alar\u0131n\u0131 okuman\u0131z\u0131 sa\u011flar.\n```bash\npython debug.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** AI, kodunuzu hat\u0131rlam\u0131yorsa veya yanl\u0131\u015f cevap veriyorsa haf\u0131zay\u0131 kontrol etmek i\u00e7in.\n\n### 2. \ud83d\ude9a Proje Nakliyecisi (`migrate_projects.py`)\nEski s\u00fcr\u00fcmden kalma veya yanl\u0131\u015fl\u0131kla ana dizine kopyalad\u0131\u011f\u0131n\u0131z projeleri bulur ve otomatik olarak yeni sisteme (`my_projects` klas\u00f6r\u00fcne) ta\u015f\u0131r.\n```bash\npython migrate_projects.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** Klas\u00f6rde projeniz var ama Launcher listesinde g\u00f6r\u00fcnm\u00fcyorsa.\n\n### 3. \ud83e\ude7a Sistem Doktoru (`system_audit.py`)\nProjelerinizin sa\u011fl\u0131k kontrol\u00fcn\u00fc yapar. Log dosyalar\u0131 dolu mu? Veritaban\u0131 b\u00fct\u00fcnl\u00fc\u011f\u00fc (integrity) sa\u011flam m\u0131? Hepsini raporlar.\n```bash\npython system_audit.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** Sistemsel bir hatadan \u015f\u00fcpheleniyorsan\u0131z veya veritaban\u0131 bozulduysa.\n\n### 4. \ud83d\udcdd Proje Katibi (`generate_docs.py`)\nT\u00fcm projenizin kodlar\u0131n\u0131 okur ve tek bir Markdown dosyas\u0131nda (`proje_dokumu.md`) birle\u015ftirir.\n```bash\npython generate_docs.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** Projenin tamam\u0131n\u0131 ChatGPT/Claude gibi ba\u015fka bir AI'ya at\u0131p \"Bunu analiz et\" demek istedi\u011finizde.\n\n### 5. \ud83d\udce1 Model Kontrolc\u00fcs\u00fc (`check_models.py`)\nGoogle hesab\u0131n\u0131zda tan\u0131ml\u0131 ve eri\u015filebilir olan Gemini modellerini listeler.\n```bash\npython check_models.py\n```\n* **Ne zaman kullan\u0131l\u0131r?** \"Hangi modelleri kullanabilirim?\" diye merak etti\u011finizde.\n\n---\n\n## \ud83e\uddea Geli\u015fmi\u015f Parametreler\n\nProjeye girdikten sonra (veya `assistant.py`'yi manuel kullan\u0131rken) \u015fu modlar\u0131 kullanabilirsiniz:\n\n* **`--dry-run` (Prova Modu):**\n  AI kodlar\u0131 yazar, plan\u0131 g\u00f6sterir ama **dosyaya kaydetmez.**\n  ```bash\n  python assistant.py \"Ana sayfay\u0131 de\u011fi\u015ftir\" --dry-run\n  ```\n\n* **`--verbose` (Geveze Mod):**\n  Arka planda d\u00f6nen ham JSON verisini ve d\u00fc\u015f\u00fcnce s\u00fcrecini g\u00f6sterir. Hata ay\u0131klamak i\u00e7in idealdir.\n  ```bash\n  python assistant.py \"Hata bul\" --verbose\n  ```\n\n---\n\n## \ud83c\udfd7\ufe0f Proje Mimarisi\n\n```text\ncoder-asistan/\n\u251c\u2500 launcher.py          # \ud83c\udfae ANA KUMANDA (Ba\u015flat\u0131c\u0131)\n\u251c\u2500 assistant.py         # \ud83e\udde0 \u0130\u015flem Motoru\n\u251c\u2500 my_projects/         # \ud83d\udcc2 PROJE FABR\u0130KASI\n\u2502  \u2514\u2500 odev-1/           # \ud83d\udd12 \u0130zole Proje Alan\u0131\n\u2502     \u251c\u2500 .coder_memory/ # \ud83e\udde0 Projeye \u00f6zel haf\u0131za\n\u2502     \u2514\u2500 src/           # Kodlar\u0131n\u0131z\n\u251c\u2500 debug.py             # \ud83d\udd75\ufe0f\u200d\u2642\ufe0f Haf\u0131za M\u00fcfetti\u015fi\n\u251c\u2500 system_audit.py      # \ud83e\ude7a Sistem Doktoru\n\u251c\u2500 migrate_projects.py  # \ud83d\ude9a Ta\u015f\u0131y\u0131c\u0131\n\u2514\u2500 requirements.txt\n```\n\n---\n\n## \ud83d\udca1 \u0130pu\u00e7lar\u0131 ve P\u00fcf Noktalar\u0131\n\n* **\ud83d\uddd1\ufe0f Proje Silme:** Bir projeyi silmek i\u00e7in Launcher'da bir komut yoktur. `my_projects` klas\u00f6r\u00fcne gidip ilgili proje klas\u00f6r\u00fcn\u00fc **elle silmeniz** yeterlidir.\n* **\ud83e\udde0 Haf\u0131za S\u0131f\u0131rlama:** AI eski kodlar\u0131 hat\u0131rlamakta \u0131srar ediyorsa veya kafas\u0131 kar\u0131\u015ft\u0131ysa; proje klas\u00f6r\u00fcn\u00fczdeki `.coder_memory` klas\u00f6r\u00fcn\u00fc silin. Coder-Asistan bir sonraki a\u00e7\u0131l\u0131\u015fta dosyalar\u0131 taray\u0131p haf\u0131zay\u0131 s\u0131f\u0131rdan kuracakt\u0131r.\n* **\u2699\ufe0f \u0130nce Ayarlar:** Dosya boyutu s\u0131n\u0131rlar\u0131n\u0131 veya maliyet hesaplama y\u00f6ntemini de\u011fi\u015ftirmek isterseniz `config.py` dosyas\u0131n\u0131 d\u00fczenleyebilirsiniz.\n\n---\n## \ud83e\udd1d Katk\u0131da Bulunma\n\nPull request'ler kabul edilir! B\u00fcy\u00fck de\u011fi\u015fiklikler i\u00e7in \u00f6nce bir Issue a\u00e7arak tart\u0131\u015fal\u0131m.\n\n> \ud83c\udfd7\ufe0f **Geli\u015ftirici Notu:** Bu projenin i\u00e7 yap\u0131s\u0131n\u0131, veri ak\u0131\u015f\u0131n\u0131 ve teknik detaylar\u0131n\u0131 derinlemesine incelemek i\u00e7in l\u00fctfen **[M\u0130MAR\u0130 VE TEKN\u0130K KILAVUZ (ARCHITECTURE.md)](ARCHITECTURE.md)** dosyas\u0131n\u0131 okuyunuz.\n---\n## \ud83d\udc64 Geli\u015ftirici\n\n**Ahmet \u00c7etin**\n* **GitHub:** [github.com/cetincevizcetoli](https://github.com/cetincevizcetoli)\n* **Web:** [yapanzeka.acetin.com.tr](https://yapanzeka.acetin.com.tr)\n\n> *\"Karma\u015f\u0131k kodlar\u0131, kontroll\u00fc ara\u00e7larla y\u00f6netin.\"*\n```\n\n#### \ud83d\udcc4 Dosya: `requirements.txt`\n\n```txt\ngoogle-genai\nrequests\nopenai\nchromadb>=0.4.0\nsentence-transformers>=2.2.0\ntorch>=2.0.0\nrank_bm25  # <--- Hibrit (Keyword) arama motoru i\u00e7in yeni eklendi\ntermcolor\ntqdm\n\n```\n\n#### \ud83d\udcc4 Dosya: `settings_menu.py`\n\n```py\nimport os\nimport json\nimport time\n\n# Renkler\nGREEN = '\\033[92m'\nRED = '\\033[91m'\nYELLOW = '\\033[93m'\nCYAN = '\\033[96m'\nRESET = '\\033[0m'\n\nSETTINGS_FILE = \"user_settings.json\"\n\n# Haf\u0131za Profilleri\nPROFILES = {\n    'light':  {'name': 'Hafif (Light)',  'size': '80 MB',  'desc': '\ud83d\ude80 \u00c7ok H\u0131zl\u0131, D\u00fc\u015f\u00fck RAM (Z570 \u0130\u00e7in \u00d6nerilen)'},\n    'medium': {'name': 'Orta (Medium)',  'size': '470 MB', 'desc': '\u2696\ufe0f Daha \u0130yi T\u00fcrk\u00e7e, Dengeli H\u0131z'},\n    'heavy':  {'name': 'A\u011f\u0131r (Heavy)',   'size': '2.2 GB', 'desc': '\ud83c\udfcb\ufe0f \u00c7ok Yava\u015f, GPU \u0130ster (Dikkat!)'}\n}\n\ndef load_settings():\n    if os.path.exists(SETTINGS_FILE):\n        try:\n            with open(SETTINGS_FILE, 'r') as f:\n                return json.load(f)\n        except: pass\n    return {\"active_profile\": \"light\"}\n\ndef save_settings(settings):\n    try:\n        with open(SETTINGS_FILE, 'w') as f:\n            json.dump(settings, f, indent=4)\n    except Exception as e:\n        print(f\"{RED}Ayarlar kaydedilemedi: {e}{RESET}\")\n\ndef settings_main():\n    while True:\n        os.system('cls' if os.name == 'nt' else 'clear')\n        current_settings = load_settings()\n        curr_profile = current_settings.get(\"active_profile\", \"light\")\n        \n        if curr_profile not in PROFILES:\n            curr_profile = 'light'\n\n        print(f\"{CYAN}\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557{RESET}\")\n        print(f\"{CYAN}\u2551           \u2699\ufe0f  S\u0130STEM AYARLARI                 \u2551{RESET}\")\n        print(f\"{CYAN}\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d{RESET}\")\n        \n        p_info = PROFILES[curr_profile]\n        \n        print(f\"\\n\ud83e\udde0 Aktif Haf\u0131za Modeli: {GREEN}{p_info['name']} [{p_info['size']}]{RESET}\")\n        print(f\"{YELLOW}   \u2514\u2500 {p_info['desc']}{RESET}\\n\")\n        \n        print(\"Mevcut Se\u00e7enekler:\")\n        print(f\"   [1] Hafif  (80 MB)  - H\u0131z Odakl\u0131\")\n        print(f\"   [2] Orta   (470 MB) - Anlama Odakl\u0131\")\n        print(f\"   [3] A\u011f\u0131r   (2 GB)   - Detay Odakl\u0131\")\n        print(f\"\\n   [Q] Men\u00fcye D\u00f6n\")\n        \n        choice = input(f\"\\n{YELLOW}Se\u00e7iminiz: {RESET}\").strip().lower()\n        \n        if choice == 'q':\n            break\n            \n        new_profile = None\n        if choice == '1': new_profile = 'light'\n        elif choice == '2': new_profile = 'medium'\n        elif choice == '3': new_profile = 'heavy'\n        \n        if new_profile and new_profile != curr_profile:\n            print(f\"\\n{RED}\u26a0\ufe0f  D\u0130KKAT: Haf\u0131za Modeli De\u011fi\u015ftiriliyor!{RESET}\")\n            print(f\"Eski model ile olu\u015fturulan proje haf\u0131zalar\u0131, bu model ile \u00e7al\u0131\u015fmaz.\")\n            print(f\"Sistem, projeye girdi\u011finde eski haf\u0131zay\u0131 otomatik olarak {RED}AR\u015e\u0130VLEY\u0130P SIFIRLAYACAKTIR.{RESET}\")\n            \n            # --- D\u00dcZELTME BURADA ---\n            # Art\u0131k hem 'evet' hem 'e' kabul ediyor\n            confirm = input(f\"\\n{RED}Onayl\u0131yor musunuz? (e/h): {RESET}\").lower()\n            \n            if confirm in ['evet', 'e']:\n                current_settings[\"active_profile\"] = new_profile\n                save_settings(current_settings)\n                print(f\"\\n{GREEN}\u2705 Ayar de\u011fi\u015ftirildi: {new_profile.upper()}{RESET}\")\n                time.sleep(1.5)\n            else:\n                print(f\"\\n{YELLOW}\u0130ptal edildi.{RESET}\")\n                time.sleep(1)\n        elif new_profile == curr_profile:\n            print(f\"\\n{YELLOW}Zaten bu mod aktif.{RESET}\")\n            time.sleep(1)\n\nif __name__ == \"__main__\":\n    settings_main()\n```\n\n#### \ud83d\udcc4 Dosya: `system_audit.py`\n\n```py\nimport os\nimport sys\nimport sqlite3\nfrom pathlib import Path\n\n# Config dosyas\u0131ndan proje klas\u00f6r\u00fcn\u00fc \u00f6\u011frenelim\ntry:\n    import config\n    PROJECTS_DIR_NAME = config.PROJECTS_DIR\nexcept ImportError:\n    PROJECTS_DIR_NAME = \"my_projects\"\n\n# Renkler\nGREEN = '\\033[92m'\nRED = '\\033[91m'\nYELLOW = '\\033[93m'\nRESET = '\\033[0m'\nCYAN = '\\033[96m'\n\ndef check_file_exists(path, description):\n    if os.path.exists(path):\n        size = os.path.getsize(path)\n        print(f\"{GREEN}\u2705 {description} Mevcut ({size} bytes){RESET}\")\n        return True\n    else:\n        print(f\"{RED}\u274c {description} BULUNAMADI! ({path}){RESET}\")\n        return False\n\ndef audit_log_file(project_path):\n    log_path = project_path / \".chat_history.log\"\n    print(f\"\\n--- \ud83d\udcdc LOG DOSYASI KONTROL\u00dc ({log_path.name}) ---\")\n    \n    if check_file_exists(log_path, \"Log Dosyas\u0131\"):\n        try:\n            with open(log_path, 'r', encoding='utf-8') as f:\n                lines = f.readlines()\n                print(f\"   \ud83d\udcc4 Toplam Sat\u0131r: {len(lines)}\")\n                if len(lines) > 0:\n                    print(f\"   \ud83d\udd0d Son Kay\u0131t: {lines[-2].strip() if len(lines) > 1 else lines[0].strip()}\")\n                else:\n                    print(f\"{YELLOW}   \u26a0\ufe0f Dosya var ama i\u00e7i bo\u015f.{RESET}\")\n        except Exception as e:\n            print(f\"{RED}   \u274c Dosya okuma hatas\u0131: {e}{RESET}\")\n\ndef audit_vector_db(project_path):\n    db_path = project_path / \".coder_memory\"\n    sqlite_file = db_path / \"chroma.sqlite3\"\n    \n    print(f\"\\n--- \ud83e\udde0 VEKT\u00d6R VER\u0130TABANI KONTROL\u00dc ---\")\n    \n    if not os.path.exists(db_path):\n        print(f\"{RED}\u274c .coder_memory klas\u00f6r\u00fc yok (Haf\u0131zas\u0131z Proje).{RESET}\")\n        return\n\n    if check_file_exists(sqlite_file, \"ChromaDB SQLite Dosyas\u0131\"):\n        try:\n            # ChromaDB k\u00fct\u00fcphanesini kullanmadan direkt SQL ile b\u00fct\u00fcnl\u00fck testi\n            conn = sqlite3.connect(sqlite_file)\n            cursor = conn.cursor()\n            \n            # Tablolar\u0131 say\n            cursor.execute(\"SELECT count(*) FROM sqlite_master WHERE type='table';\")\n            tables = cursor.fetchone()[0]\n            print(f\"   \ud83d\udcca Tablo Say\u0131s\u0131: {tables}\")\n            \n            # Embedding say\u0131s\u0131n\u0131 bulmaya \u00e7al\u0131\u015f\n            try:\n                # Chroma versiyonuna g\u00f6re tablo ad\u0131 de\u011fi\u015febilir, genelde 'embeddings'\n                cursor.execute(\"SELECT count(*) FROM embeddings;\")\n                count = cursor.fetchone()[0]\n                print(f\"   \ud83e\uddec \u0130ndekslenmi\u015f Vekt\u00f6r Say\u0131s\u0131: {GREEN}{count}{RESET}\")\n            except:\n                print(f\"{YELLOW}   \u26a0\ufe0f 'embeddings' tablosu direkt okunamad\u0131 (Versiyon fark\u0131 olabilir).{RESET}\")\n                \n            conn.close()\n            print(f\"{GREEN}   \u2705 Veritaban\u0131 b\u00fct\u00fcnl\u00fc\u011f\u00fc (Integrity) sa\u011flam.{RESET}\")\n            \n        except Exception as e:\n            print(f\"{RED}   \u274c Veritaban\u0131 bozuk veya okunam\u0131yor: {e}{RESET}\")\n\ndef main():\n    # D\u00dcZELTME: Art\u0131k k\u00f6k dizine de\u011fil, my_projects i\u00e7ine bak\u0131yoruz\n    workspace = Path.cwd() / PROJECTS_DIR_NAME\n    \n    if not workspace.exists():\n        print(f\"{RED}Hata: '{PROJECTS_DIR_NAME}' klas\u00f6r\u00fc bulunamad\u0131.{RESET}\")\n        return\n\n    # Projeleri bul (i\u00e7inde .coder_memory olan klas\u00f6rler)\n    projects = [d for d in workspace.iterdir() if d.is_dir() and (d / \".coder_memory\").exists()]\n    \n    print(f\"{CYAN}\ud83d\udd0d S\u0130STEM DENET\u00c7\u0130S\u0130 BA\u015eLATILDI{RESET}\")\n    print(f\"\ud83d\udcc2 Hedef Dizin: {workspace}\")\n    \n    if not projects:\n        print(f\"{RED}Test edilecek proje bulunamad\u0131.{RESET}\")\n        return\n\n    print(f\"\u2705 {len(projects)} adet proje tespit edildi.\")\n    \n    for proj in projects:\n        print(f\"\\n{YELLOW}========================================{RESET}\")\n        print(f\"\ud83d\udcc2 PROJE DENETLEN\u0130YOR: {proj.name}\")\n        print(f\"{YELLOW}========================================{RESET}\")\n        \n        audit_log_file(proj)\n        audit_vector_db(proj)\n\nif __name__ == \"__main__\":\n    main()\n```\n\n#### \ud83d\udcc4 Dosya: `user_settings.json`\n\n```json\n{\n    \"active_profile\": \"medium\"\n}\n```\n\n#### \ud83d\udcc4 Dosya: `core/base.py`\n\n```py\n# core/base.py: Ortak Aray\u00fcz ve Hata Tan\u0131mlar\u0131\n\nclass ModelAPIError(Exception):\n    \"\"\"API ba\u011flant\u0131/kota hatalar\u0131 i\u00e7in genel hata s\u0131n\u0131f\u0131.\"\"\"\n    pass\n\nclass BaseModel:\n    \"\"\"T\u00fcm model s\u0131n\u0131flar\u0131n\u0131n miras alaca\u011f\u0131 soyut s\u0131n\u0131f.\"\"\"\n    MODEL_NAME = \"Temel Model\"\n\n    def __init__(self):\n        # API anahtar\u0131n\u0131 kontrol etme vb.\n        pass\n\n    def generate_content(self, system_instruction, prompt_text):\n        \"\"\"AI'dan i\u00e7erik \u00fcretme \u00e7a\u011fr\u0131s\u0131.\"\"\"\n        raise NotImplementedError(\"Bu metot alt s\u0131n\u0131flar taraf\u0131ndan uygulanmal\u0131d\u0131r.\")\n```\n\n#### \ud83d\udcc4 Dosya: `core/deepseek.py`\n\n```py\n# core/deepseek.py\nimport os\nimport requests\nfrom .base import BaseModel, ModelAPIError\nfrom config import MODEL_CONFIGS\n\nclass DeepSeekModel(BaseModel):\n    \"\"\"DeepSeek API - \u00dccretsiz ve g\u00fc\u00e7l\u00fc\"\"\"\n    \n    def __init__(self):\n        conf = MODEL_CONFIGS[\"deepseek\"]\n        self.MODEL_NAME = conf[\"display_name\"]\n        \n        self.api_key = os.getenv(conf[\"env_var\"])\n        if not self.api_key:\n            raise ModelAPIError(f\"{conf['env_var']} ortam de\u011fi\u015fkeni bulunamad\u0131.\")\n        \n        # DeepSeek OpenAI uyumlu API u\u00e7 noktas\u0131\n        self.api_url = \"https://api.deepseek.com/v1/chat/completions\"\n        self.model_id = conf[\"model_id\"]\n    \n    def generate_content(self, system_instruction, prompt_text):\n        headers = {\n            \"Authorization\": f\"Bearer {self.api_key}\",\n            \"Content-Type\": \"application/json\"\n        }\n        \n        payload = {\n            \"model\": self.model_id,\n            \"messages\": [\n                {\"role\": \"system\", \"content\": system_instruction},\n                {\"role\": \"user\", \"content\": prompt_text}\n            ],\n            \"temperature\": 0.1,\n            \"max_tokens\": 8000,\n            \"response_format\": {\"type\": \"json_object\"}  # JSON zorla\n        }\n        \n        try:\n            response = requests.post(self.api_url, headers=headers, json=payload, timeout=60)\n            response.raise_for_status()\n            result = response.json()\n            \n            # Debug i\u00e7in\n            if hasattr(self, 'DEBUG') and self.DEBUG:\n                print(f\"DEBUG DeepSeek Response: {result}\")\n                \n            return result[\"choices\"][0][\"message\"][\"content\"].strip()\n            \n        except requests.exceptions.RequestException as e:\n            # Hata mesaj\u0131n\u0131 daha detayl\u0131 g\u00f6rmek i\u00e7in\n            if hasattr(e, 'response') and e.response is not None:\n                error_msg = e.response.text\n                print(f\"DEBUG DeepSeek Error: {error_msg}\")\n                try:\n                    error_json = json.loads(error_msg)\n                    raise ModelAPIError(f\"DeepSeek Hatas\u0131: {error_json.get('message', str(e))}\")\n                except:\n                    raise ModelAPIError(f\"DeepSeek API Hatas\u0131: {e}\")\n            else:\n                raise ModelAPIError(f\"DeepSeek Ba\u011flant\u0131 Hatas\u0131: {e}\")\n        except Exception as e:\n            raise ModelAPIError(f\"DeepSeek \u0130\u015flem Hatas\u0131: {e}\")\n```\n\n#### \ud83d\udcc4 Dosya: `core/gemini.py`\n\n```py\nimport os\nfrom google import genai\nfrom google.genai import types\nfrom .base import BaseModel, ModelAPIError\nfrom config import MODEL_CONFIGS\n\nclass GeminiModel(BaseModel):\n    def __init__(self):\n        conf = MODEL_CONFIGS[\"gemini\"]\n        self.MODEL_NAME = conf[\"display_name\"]\n        self.raw_model_name = conf[\"model_name\"] # Fiyat hesaplamas\u0131 i\u00e7in\n        \n        api_key = os.getenv(conf[\"env_var\"])\n        if not api_key:\n            raise ModelAPIError(f\"{conf['env_var']} bulunamad\u0131.\")\n\n        try:\n            self.client = genai.Client(api_key=api_key)\n        except Exception as e:\n            raise ModelAPIError(f\"Gemini Client Ba\u015flat\u0131lamad\u0131: {e}\")\n\n    def generate_content(self, system_instruction, prompt_text):\n        try:\n            response = self.client.models.generate_content(\n                model=self.raw_model_name,\n                contents=[prompt_text],\n                config=types.GenerateContentConfig(\n                    system_instruction=system_instruction,\n                    temperature=0.1\n                )\n            )\n            \n            # Token kullan\u0131m\u0131n\u0131 g\u00fcvenli \u015fekilde al\n            usage = {\n                \"input_tokens\": 0,\n                \"output_tokens\": 0\n            }\n            \n            if hasattr(response, 'usage_metadata'):\n                usage[\"input_tokens\"] = response.usage_metadata.prompt_token_count\n                usage[\"output_tokens\"] = response.usage_metadata.candidates_token_count\n\n            return {\n                \"content\": response.text.strip(),\n                \"usage\": usage,\n                \"model_key\": self.raw_model_name\n            }\n\n        except Exception as e:\n            raise ModelAPIError(f\"Gemini Hatas\u0131: {e}\")\n```\n\n#### \ud83d\udcc4 Dosya: `core/groq.py`\n\n```py\n# core/groq.py (DO\u011eRU VERS\u0130YON)\nimport os\nimport requests\nfrom .base import BaseModel, ModelAPIError\nfrom config import MODEL_CONFIGS\n\nclass GroqModel(BaseModel):\n    \"\"\"Groq LPU - Ultra h\u0131zl\u0131 inference\"\"\"\n    \n    def __init__(self):\n        conf = MODEL_CONFIGS[\"groq\"]\n        self.MODEL_NAME = conf[\"display_name\"]\n        \n        # \u26a0\ufe0f Buradaki atamalar\u0131n do\u011fru yap\u0131ld\u0131\u011f\u0131ndan emin olun:\n        self.api_key = os.getenv(conf[\"env_var\"])\n        if not self.api_key:\n            raise ModelAPIError(f\"{conf['env_var']} ortam de\u011fi\u015fkeni bulunamad\u0131.\")\n        \n        self.api_url = \"https://api.groq.com/openai/v1/chat/completions\"\n        self.model_id = conf[\"model_id\"]\n    \n    def generate_content(self, system_instruction, prompt_text):\n        headers = {\n            \"Authorization\": f\"Bearer {self.api_key}\",\n            \"Content-Type\": \"application/json\"\n        }\n        \n        payload = {\n            \"model\": self.model_id,\n            \"messages\": [\n                {\"role\": \"system\", \"content\": system_instruction},\n                {\"role\": \"user\", \"content\": prompt_text}\n            ],\n            \"temperature\": 0.1,\n            \"max_tokens\": 8000,\n            \"response_format\": {\"type\": \"json_object\"}  # JSON zorla\n        }\n        \n        try:\n            response = requests.post(self.api_url, headers=headers, json=payload, timeout=30)\n            response.raise_for_status()\n            result = response.json()\n            return result[\"choices\"][0][\"message\"][\"content\"].strip()\n        except Exception as e:\n            # Hata mesaj\u0131n\u0131 daha detayl\u0131 g\u00f6rmek i\u00e7in\n            if hasattr(e, 'response') and e.response is not None:\n                 print(f\"DEBUG RESPONSE: {e.response.text}\")\n            raise ModelAPIError(f\"Groq API Hatas\u0131: {e}\")\n```\n\n#### \ud83d\udcc4 Dosya: `core/huggingface.py`\n\n```py\n# core/huggingface.py\nimport os\nimport requests\nimport json\nfrom .base import BaseModel, ModelAPIError\nfrom config import MODEL_CONFIGS\n\nclass HuggingFaceModel(BaseModel):\n    def __init__(self):\n        conf = MODEL_CONFIGS[\"huggingface\"]\n        self.MODEL_NAME = conf[\"display_name\"]\n        self.model_id = conf[\"model_id\"]\n        \n        self.api_key = os.getenv(conf[\"env_var\"])\n        if not self.api_key:\n            raise ModelAPIError(f\"{conf['env_var']} bulunamad\u0131.\")\n        \n        self.headers = {\"Authorization\": f\"Bearer {self.api_key}\"}\n        self.api_url = f\"https://router.huggingface.co/models/{self.model_id}\"\n\n    def generate_content(self, system_instruction, prompt_text):\n        # --- PROMPT FORMATLAMA ---\n        # Qwen ve modern modeller i\u00e7in ChatML format\u0131 en iyisidir\n        if \"qwen\" in self.model_id.lower():\n            full_prompt = (\n                f\"<|im_start|>system\\n{system_instruction}<|im_end|>\\n\"\n                f\"<|im_start|>user\\n{prompt_text}<|im_end|>\\n\"\n                f\"<|im_start|>assistant\\n\"\n            )\n        elif \"llama-3\" in self.model_id.lower():\n            full_prompt = (\n                f\"<|begin_of_text|><|start_header_id|>system<|end_header_id|>\\n{system_instruction}<|eot_id|>\\n\"\n                f\"<|start_header_id|>user<|end_header_id|>\\n{prompt_text}<|eot_id|>\\n\"\n                f\"<|start_header_id|>assistant<|end_header_id|>\"\n            )\n        else:\n            # Varsay\u0131lan (Mistral/Eski Llama)\n            full_prompt = f\"[INST] <<SYS>>\\n{system_instruction}\\n<</SYS>>\\n{prompt_text} [/INST]\"\n\n        payload = {\n            \"inputs\": full_prompt,\n            \"parameters\": {\n                \"max_new_tokens\": 4096, # Kod \u00fcretimi i\u00e7in y\u00fcksek token\n                \"temperature\": 0.1,     # Tutarl\u0131l\u0131k i\u00e7in d\u00fc\u015f\u00fck s\u0131cakl\u0131k\n                \"return_full_text\": False\n            }\n        }\n\n        try:\n            response = requests.post(self.api_url, headers=self.headers, json=payload)\n            response.raise_for_status()\n            \n            result = response.json()\n            \n            # Hugging Face API bazen liste, bazen dict d\u00f6ner\n            if isinstance(result, list) and len(result) > 0:\n                return result[0].get('generated_text', '').strip()\n            elif isinstance(result, dict):\n                return result.get('generated_text', '').strip()\n            else:\n                raise ModelAPIError(f\"Beklenmeyen API yan\u0131t format\u0131: {type(result)}\")\n\n        except Exception as e:\n            raise ModelAPIError(f\"HF API Hatas\u0131: {e}\")\n```\n\n#### \ud83d\udcc4 Dosya: `core/memory.py`\n\n```py\nimport os\nimport shutil\nimport chromadb\nimport torch\nimport json\nimport numpy as np\nfrom sentence_transformers import SentenceTransformer\nfrom rank_bm25 import BM25Okapi\nimport config\nfrom config import Colors\n\nclass MemoryManager:\n    def __init__(self, project_root: str):\n        self.project_root = project_root\n        self.memory_path = os.path.join(project_root, config.MEMORY_DIR_NAME)\n        self.bm25_path = os.path.join(self.memory_path, \"keyword_index.json\")\n        \n        # 1. Donan\u0131m Alg\u0131lama\n        self.device = self._detect_device()\n        print(f\"{Colors.MAGENTA}\ud83e\udde0 Hibrit Haf\u0131za Motoru Ba\u015flat\u0131l\u0131yor... ({self.device}){Colors.RESET}\")\n        \n        # 2. Vekt\u00f6r Motoru (ChromaDB)\n        self.embedder = SentenceTransformer(config.EMBEDDING_MODEL, device=self.device)\n        os.makedirs(self.memory_path, exist_ok=True)\n        self.client = chromadb.PersistentClient(path=self.memory_path)\n        self.collection = self.client.get_or_create_collection(\n            name=config.COLLECTION_NAME,\n            metadata={\"hnsw:space\": \"cosine\"}\n        )\n\n        # 3. Anahtar Kelime Motoru (BM25)\n        self.bm25 = None\n        self.indexed_files = []\n        self._load_bm25()\n\n    def _detect_device(self):\n        if torch.cuda.is_available(): return \"cuda\"\n        if torch.backends.mps.is_available(): return \"mps\"\n        return \"cpu\"\n\n    def _load_bm25(self):\n        \"\"\"BM25 indeksini diskten y\u00fckler.\"\"\"\n        if os.path.exists(self.bm25_path):\n            try:\n                with open(self.bm25_path, 'r', encoding='utf-8') as f:\n                    data = json.load(f)\n                    self.indexed_files = data['files']\n                    corpus = [doc.split() for doc in data['corpus']]\n                    self.bm25 = BM25Okapi(corpus)\n            except: pass\n\n    def index_files(self, file_paths: list):\n        \"\"\"Dosyalar\u0131 hem Vekt\u00f6r hem de BM25 i\u00e7in indeksler.\"\"\"\n        documents = []\n        metadatas = []\n        ids = []\n        corpus_for_bm25 = []\n\n        print(f\"{Colors.CYAN}\ud83d\udce5 {len(file_paths)} dosya hibrit indeksleniyor...{Colors.RESET}\")\n\n        for fpath in file_paths:\n            full_path = os.path.join(self.project_root, fpath)\n            if not os.path.exists(full_path): continue\n            \n            try:\n                with open(full_path, 'r', encoding='utf-8') as f:\n                    content = f.read()\n                if not content.strip(): continue\n\n                documents.append(content)\n                metadatas.append({\"source\": fpath})\n                ids.append(fpath)\n                corpus_for_bm25.append(content)\n                if fpath not in self.indexed_files: self.indexed_files.append(fpath)\n\n            except Exception as e:\n                print(f\"{Colors.YELLOW}Uyar\u0131: {fpath} okunamad\u0131 ({e}){Colors.RESET}\")\n\n        if documents:\n            # Vekt\u00f6r Kay\u0131t\n            embeddings = self.embedder.encode(documents, normalize_embeddings=True).tolist()\n            self.collection.upsert(documents=documents, embeddings=embeddings, metadatas=metadatas, ids=ids)\n            \n            # BM25 Kay\u0131t\n            current_data = {\"files\": self.indexed_files, \"corpus\": documents} \n            with open(self.bm25_path, 'w', encoding='utf-8') as f:\n                json.dump(current_data, f)\n            self._load_bm25()\n            print(f\"{Colors.GREEN}\u2705 Hibrit haf\u0131za g\u00fcncellendi.{Colors.RESET}\")\n\n    def query(self, prompt: str, n_results=config.MAX_CONTEXT_RESULTS):\n        \"\"\"Hibrit Arama: Vekt\u00f6r + BM25 sonu\u00e7lar\u0131n\u0131 birle\u015ftirir.\"\"\"\n        # 1. Vekt\u00f6r Aramas\u0131 (Anlamsal)\n        query_embedding = self.embedder.encode([prompt], normalize_embeddings=True).tolist()\n        vector_results = self.collection.query(query_embeddings=query_embedding, n_results=n_results)\n        \n        vector_docs = []\n        if vector_results['documents']:\n            for i, doc in enumerate(vector_results['documents'][0]):\n                source = vector_results['metadatas'][0][i]['source']\n                vector_docs.append((source, doc, \"Vekt\u00f6r\"))\n\n        # 2. BM25 Aramas\u0131 (Anahtar Kelime)\n        bm25_docs = []\n        if self.bm25:\n            tokenized_query = prompt.split()\n            top_n = self.bm25.get_top_n(tokenized_query, self.indexed_files, n=n_results)\n            for source in top_n:\n                # BM25'ten gelen dosyan\u0131n i\u00e7eri\u011fini Chroma'dan \u00e7ekelim\n                res = self.collection.get(ids=[source])\n                if res['documents']:\n                    bm25_docs.append((source, res['documents'][0], \"Keyword\"))\n\n        # 3. Sonu\u00e7lar\u0131 Birle\u015ftir (Tekille\u015ftir)\n        seen_sources = set()\n        final_context = []\n        \n        # \u00d6ncelik: BM25 (Nokta at\u0131\u015f\u0131 kelime e\u015fle\u015fmesi) sonra Vekt\u00f6r\n        for source, doc, mtype in (bm25_docs + vector_docs):\n            if source not in seen_sources:\n                final_context.append(f\"--- BA\u011eLAM ({mtype}): {source} ---\\n{doc}\\n\")\n                seen_sources.add(source)\n                if len(final_context) >= n_results: break\n        \n        return \"\\n\".join(final_context)\n```\n\n#### \ud83d\udcc4 Dosya: `core/orchestrator.py`\n\n```py\n# core/orchestrator.py\nimport json\nfrom config import Colors, ARCHITECT_INSTRUCTION, DEVELOPER_INSTRUCTION\nfrom core.groq import GroqModel\nfrom core.gemini import GeminiModel\n\nclass AgentOrchestrator:\n    def __init__(self):\n        self.architect = GroqModel()  # H\u0131zl\u0131 ve mant\u0131kl\u0131\n        self.developer = GeminiModel() # Geni\u015f ba\u011flam ve hassas yaz\u0131m\n\n    def execute_workflow(self, prompt, context, working_dir):\n        print(f\"{Colors.MAGENTA}\ud83c\udfd7\ufe0f  M\u0130MAR (Groq) plan\u0131 haz\u0131rl\u0131yor...{Colors.RESET}\")\n        \n        # 1. Mimar Plan\u0131 \u00c7\u0131kar\u0131r\n        arch_prompt = f\"BA\u011eLAM:\\n{context}\\n\\n\u0130STEK: {prompt}\"\n        arch_res = self.architect.generate_content(ARCHITECT_INSTRUCTION, arch_prompt)\n        \n        # JSON temizleme ve y\u00fckleme\n        try:\n            # Groq bazen string bazen dict d\u00f6nebilir, adapt\u00f6r\u00fcne g\u00f6re ayarla\n            plan_data = json.loads(arch_res) if isinstance(arch_res, str) else arch_res\n        except:\n            print(f\"{Colors.RED}Mimar plan\u0131 olu\u015fturamad\u0131.{Colors.RESET}\")\n            return None\n\n        print(f\"\\n{Colors.CYAN}\ud83d\udccb M\u0130MARIN PLANI:{Colors.RESET}\\n{plan_data.get('plan')}\")\n        print(f\"\ud83d\udcc2 Etkilenecek Dosyalar: {plan_data.get('etkilenecek_dosyalar')}\")\n\n        confirm = input(f\"\\n{Colors.YELLOW}Bu plan\u0131 onayl\u0131yor musunuz? (e/h): {Colors.RESET}\").lower()\n        if confirm != 'e':\n            return None\n\n        # 2. M\u00fchendis Kodu Yazar\n        print(f\"\\n{Colors.GREEN}\ud83d\udc68\u200d\ud83d\udcbb M\u00dcHEND\u0130S (Gemini) kodlamaya ba\u015fl\u0131yor...{Colors.RESET}\")\n        dev_prompt = f\"M\u0130MAR PLANI: {plan_data.get('plan')}\\n\\nBA\u011eLAM: {context}\\n\\n\u0130STEK: {prompt}\"\n        dev_res = self.developer.generate_content(DEVELOPER_INSTRUCTION, dev_prompt)\n        \n        return dev_res # Assistant.py'deki clean_json_string'e gidecek\n```\n", "hesapla_ozel_oran(deger):\n    return deger * 1.618"]}